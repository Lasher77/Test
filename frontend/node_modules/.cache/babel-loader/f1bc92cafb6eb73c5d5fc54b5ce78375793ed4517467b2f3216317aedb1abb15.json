{"ast":null,"code":"var _jsxFileName = \"/Users/svenwinkler/CRM-Argus/frontend/src/pages/quotes/QuoteForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Box, Typography, Paper, Button, TextField, Grid, Card, CardContent, FormControl, InputLabel, Select, MenuItem, CircularProgress, Snackbar, Alert, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, IconButton } from '@mui/material';\nimport { styled } from '@mui/material/styles';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport SaveIcon from '@mui/icons-material/Save';\nimport AddIcon from '@mui/icons-material/Add';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport axios from 'axios';\n\n// API Service\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:3000/api';\n\n// Styled-Komponente für den Header-Bereich\nconst HeaderBox = styled(Box)(({\n  theme\n}) => ({\n  display: 'flex',\n  justifyContent: 'space-between',\n  alignItems: 'center',\n  marginBottom: theme.spacing(3)\n}));\n\n// Styled-Komponente für die Form-Karte\n_c = HeaderBox;\nconst FormCard = styled(Card)(({\n  theme\n}) => ({\n  marginBottom: theme.spacing(3)\n}));\n\n// Funktion zum Formatieren von Währungsbeträgen\n_c2 = FormCard;\nconst formatCurrency = amount => {\n  const numericAmount = Number(amount);\n  if (isNaN(numericAmount)) {\n    return 'N/A';\n  }\n  return new Intl.NumberFormat('de-DE', {\n    style: 'currency',\n    currency: 'EUR'\n  }).format(numericAmount);\n};\nconst QuoteForm = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(false);\n  const [accounts, setAccounts] = useState([]);\n  const [contacts, setContacts] = useState([]); // State für Kontakte\n  const [products, setProducts] = useState([]);\n  const [quote, setQuote] = useState({\n    account_id: '',\n    contact_id: '',\n    // Hinzugefügt\n    property_id: '',\n    // Optional, falls benötigt\n    quote_number: '',\n    // Geändert von title\n    quote_date: new Date().toISOString().split('T')[0],\n    // Geändert von issue_date\n    valid_until: '',\n    status: 'created',\n    // Geändert von draft\n    notes: '',\n    total_net: 0,\n    total_gross: 0,\n    items: []\n  });\n  const isEditMode = !!id;\n\n  // Accounts laden für die Auswahl\n  useEffect(() => {\n    const fetchAccounts = async () => {\n      try {\n        const response = await axios.get(`${API_URL}/accounts`);\n        if (response.data.success) {\n          setAccounts(response.data.data);\n        }\n      } catch (err) {\n        console.error('Fehler beim Abrufen der Accounts:', err);\n        setError('Fehler beim Laden der Accounts.');\n      }\n    };\n    fetchAccounts();\n  }, []);\n\n  // Kontakte laden, wenn ein Account ausgewählt wird\n  useEffect(() => {\n    if (quote.account_id) {\n      const fetchContacts = async () => {\n        try {\n          const response = await axios.get(`${API_URL}/accounts/${quote.account_id}/contacts`);\n          if (response.data.success) {\n            setContacts(response.data.data);\n            // Reset contact_id if the current one is not in the new list\n            if (!response.data.data.some(c => c.contact_id === quote.contact_id)) {\n              setQuote(prev => ({\n                ...prev,\n                contact_id: ''\n              }));\n            }\n          } else {\n            setContacts([]);\n            setQuote(prev => ({\n              ...prev,\n              contact_id: ''\n            }));\n          }\n        } catch (err) {\n          console.error('Fehler beim Abrufen der Kontakte:', err);\n          setContacts([]);\n          setQuote(prev => ({\n            ...prev,\n            contact_id: ''\n          }));\n          setError('Fehler beim Laden der Kontakte für diesen Account.');\n        }\n      };\n      fetchContacts();\n    } else {\n      setContacts([]); // Reset contacts if no account is selected\n      setQuote(prev => ({\n        ...prev,\n        contact_id: ''\n      }));\n    }\n  }, [quote.account_id]); // Abhängigkeit von account_id\n\n  // Produkte laden für die Auswahl (optional, da wir zu Freitext wechseln)\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        const response = await axios.get(`${API_URL}/products`);\n        if (response.data.success) {\n          setProducts(response.data.data);\n        }\n      } catch (err) {\n        console.error('Fehler beim Abrufen der Produkte:', err);\n        // setError('Fehler beim Laden der Produkte.'); // Optional\n      }\n    };\n    fetchProducts();\n  }, []);\n\n  // Angebots-Daten laden, wenn im Edit-Modus\n  useEffect(() => {\n    if (isEditMode) {\n      const fetchQuote = async () => {\n        try {\n          setLoading(true);\n          setError(null);\n          const response = await axios.get(`${API_URL}/quotes/${id}`);\n          if (response.data.success) {\n            const fetchedData = response.data.data;\n            // Stelle sicher, dass items ein Array ist\n            fetchedData.items = Array.isArray(fetchedData.items) ? fetchedData.items : [];\n            // Konvertiere Datumswerte für Input-Felder\n            fetchedData.quote_date = fetchedData.quote_date ? new Date(fetchedData.quote_date).toISOString().split('T')[0] : '';\n            fetchedData.valid_until = fetchedData.valid_until ? new Date(fetchedData.valid_until).toISOString().split('T')[0] : '';\n            setQuote(fetchedData);\n          } else {\n            setError(response.data.message || 'Fehler beim Laden der Angebots-Daten');\n          }\n        } catch (err) {\n          var _err$response, _err$response$data;\n          console.error('Fehler beim Abrufen des Angebots:', err);\n          setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Fehler beim Laden der Angebots-Daten');\n        } finally {\n          setLoading(false);\n        }\n      };\n      fetchQuote();\n    }\n  }, [id, isEditMode]);\n\n  // Formular-Eingaben aktualisieren\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setQuote(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  // Neues Item zum Angebot hinzufügen\n  const handleAddItem = () => {\n    setQuote(prev => ({\n      ...prev,\n      items: [...(Array.isArray(prev.items) ? prev.items : []),\n      // Sicherstellen, dass items ein Array ist\n      {\n        // product_id: '', // Vorerst entfernt für Freitext\n        description: '',\n        quantity: 1,\n        unit: 'Stk',\n        // Standardeinheit\n        unit_price: 0,\n        vat_rate: 19,\n        // Standard MwSt.\n        total_net: 0,\n        total_gross: 0,\n        position: (Array.isArray(prev.items) ? prev.items.length : 0) + 1 // Position automatisch setzen\n      }]\n    }));\n  };\n\n  // Item aus dem Angebot entfernen\n  const handleRemoveItem = index => {\n    setQuote(prev => ({\n      ...prev,\n      items: (Array.isArray(prev.items) ? prev.items : []).filter((_, i) => i !== index)\n    }));\n  };\n\n  // Item-Eingaben aktualisieren und Summen neu berechnen\n  const handleItemChange = (index, field, value) => {\n    setQuote(prev => {\n      const updatedItems = [...(Array.isArray(prev.items) ? prev.items : [])];\n      if (!updatedItems[index]) return prev; // Sicherheitscheck\n\n      let numericValue = value;\n      if (['quantity', 'unit_price', 'vat_rate'].includes(field)) {\n        numericValue = parseFloat(value) || 0;\n      }\n      updatedItems[index] = {\n        ...updatedItems[index],\n        [field]: numericValue\n      };\n\n      // Neuberechnung der Zeilensummen\n      const item = updatedItems[index];\n      const quantity = Number(item.quantity) || 0;\n      const unitPrice = Number(item.unit_price) || 0;\n      const vatRate = Number(item.vat_rate) || 0;\n      item.total_net = quantity * unitPrice;\n      item.total_gross = item.total_net * (1 + vatRate / 100);\n      return {\n        ...prev,\n        items: updatedItems\n      };\n    });\n  };\n\n  // Gesamtbeträge neu berechnen, wenn sich Items ändern\n  useEffect(() => {\n    const calculateTotals = () => {\n      const currentItems = Array.isArray(quote.items) ? quote.items : [];\n      const totalNet = currentItems.reduce((sum, item) => sum + (Number(item.total_net) || 0), 0);\n      const totalGross = currentItems.reduce((sum, item) => sum + (Number(item.total_gross) || 0), 0);\n      setQuote(prev => ({\n        ...prev,\n        total_net: totalNet,\n        total_gross: totalGross\n      }));\n    };\n    calculateTotals();\n  }, [quote.items]);\n\n  // Formular absenden\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setSaving(true);\n    setError(null);\n    setSuccess(false);\n\n    // Stelle sicher, dass items ein Array ist\n    const submissionData = {\n      ...quote,\n      items: Array.isArray(quote.items) ? quote.items : []\n    };\n\n    // Entferne Felder, die nicht im Backend-Modell sind (falls nötig)\n    // delete submissionData.title; \n    // delete submissionData.description; // Wenn description nicht mehr im Hauptobjekt ist\n    // delete submissionData.issue_date;\n\n    try {\n      let response;\n      if (isEditMode) {\n        response = await axios.put(`${API_URL}/quotes/${id}`, submissionData);\n      } else {\n        response = await axios.post(`${API_URL}/quotes`, submissionData);\n      }\n      if (response.data.success) {\n        setSuccess(true);\n        setTimeout(() => {\n          navigate('/quotes');\n        }, 1500);\n      } else {\n        setError(response.data.message || 'Fehler beim Speichern des Angebots');\n      }\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      console.error('Fehler beim Speichern des Angebots:', err);\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || 'Fehler beim Speichern des Angebots');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // Zurück zur Angebots-Liste\n  const handleBack = () => {\n    navigate('/quotes');\n  };\n  if (loading && isEditMode) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        justifyContent: 'center',\n        p: 3\n      },\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: [/*#__PURE__*/_jsxDEV(HeaderBox, {\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          startIcon: /*#__PURE__*/_jsxDEV(ArrowBackIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 24\n          }, this),\n          onClick: handleBack,\n          sx: {\n            mr: 2\n          },\n          children: \"Zur\\xFCck\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          children: isEditMode ? `Angebot #${quote.quote_number} bearbeiten` : 'Neues Angebot erstellen'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        startIcon: /*#__PURE__*/_jsxDEV(SaveIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 22\n        }, this),\n        onClick: handleSubmit,\n        disabled: saving || !quote.account_id || !quote.contact_id // Speichern deaktivieren, wenn kein Account/Kontakt gewählt\n        ,\n        children: saving ? 'Wird gespeichert...' : 'Speichern'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      sx: {\n        p: 3\n      },\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(FormCard, {\n              children: /*#__PURE__*/_jsxDEV(CardContent, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h6\",\n                  gutterBottom: true,\n                  children: \"Allgemeine Informationen\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 349,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  container: true,\n                  spacing: 2,\n                  children: [/*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    md: 6,\n                    children: /*#__PURE__*/_jsxDEV(FormControl, {\n                      fullWidth: true,\n                      margin: \"normal\",\n                      required: true,\n                      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                        id: \"account-select-label\",\n                        children: \"Account *\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 355,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(Select, {\n                        labelId: \"account-select-label\",\n                        id: \"account-select\",\n                        name: \"account_id\",\n                        value: quote.account_id || '',\n                        onChange: handleChange,\n                        label: \"Account *\",\n                        children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: \"\",\n                          children: /*#__PURE__*/_jsxDEV(\"em\", {\n                            children: \"Account ausw\\xE4hlen\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 365,\n                            columnNumber: 29\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 364,\n                          columnNumber: 27\n                        }, this), accounts.map(account => /*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: account.account_id,\n                          children: account.name\n                        }, account.account_id, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 368,\n                          columnNumber: 29\n                        }, this))]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 356,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 354,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 353,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    md: 6,\n                    children: /*#__PURE__*/_jsxDEV(FormControl, {\n                      fullWidth: true,\n                      margin: \"normal\",\n                      required: true,\n                      disabled: !quote.account_id,\n                      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                        id: \"contact-select-label\",\n                        children: \"Kontakt *\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 378,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(Select, {\n                        labelId: \"contact-select-label\",\n                        id: \"contact-select\",\n                        name: \"contact_id\",\n                        value: quote.contact_id || '',\n                        onChange: handleChange,\n                        label: \"Kontakt *\",\n                        children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: \"\",\n                          children: /*#__PURE__*/_jsxDEV(\"em\", {\n                            children: \"Kontakt ausw\\xE4hlen\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 388,\n                            columnNumber: 29\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 387,\n                          columnNumber: 27\n                        }, this), contacts.map(contact => /*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: contact.contact_id,\n                          children: `${contact.first_name} ${contact.last_name}`\n                        }, contact.contact_id, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 391,\n                          columnNumber: 29\n                        }, this))]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 379,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 377,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 375,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    md: 6,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      fullWidth: true,\n                      required: true,\n                      label: \"Angebotsnummer *\",\n                      name: \"quote_number\" // Geändert von title\n                      ,\n                      value: quote.quote_number || '',\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      margin: \"normal\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 399,\n                      columnNumber: 24\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 398,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    md: 6,\n                    children: /*#__PURE__*/_jsxDEV(FormControl, {\n                      fullWidth: true,\n                      margin: \"normal\",\n                      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                        id: \"status-select-label\",\n                        children: \"Status\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 412,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(Select, {\n                        labelId: \"status-select-label\",\n                        id: \"status-select\",\n                        name: \"status\",\n                        value: quote.status || 'created',\n                        onChange: handleChange,\n                        label: \"Status\",\n                        children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: \"created\",\n                          children: \"Erstellt\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 421,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: \"sent\",\n                          children: \"Gesendet\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 422,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: \"accepted\",\n                          children: \"Akzeptiert\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 423,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: \"rejected\",\n                          children: \"Abgelehnt\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 424,\n                          columnNumber: 27\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 413,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 411,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 410,\n                    columnNumber: 22\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    md: 6,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      fullWidth: true,\n                      required: true,\n                      label: \"Angebotsdatum *\",\n                      name: \"quote_date\" // Geändert von issue_date\n                      ,\n                      type: \"date\",\n                      value: quote.quote_date || '',\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      margin: \"normal\",\n                      InputLabelProps: {\n                        shrink: true\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 429,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 428,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    md: 6,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      fullWidth: true,\n                      label: \"G\\xFCltig bis\",\n                      name: \"valid_until\",\n                      type: \"date\",\n                      value: quote.valid_until || '',\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      margin: \"normal\",\n                      InputLabelProps: {\n                        shrink: true\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 445,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 444,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 352,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(FormCard, {\n              children: /*#__PURE__*/_jsxDEV(CardContent, {\n                children: [/*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                    mb: 2\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"h6\",\n                    children: \"Positionen\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 468,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"outlined\",\n                    startIcon: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 473,\n                      columnNumber: 34\n                    }, this),\n                    onClick: handleAddItem,\n                    children: \"Position hinzuf\\xFCgen\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 471,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 467,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(TableContainer, {\n                  children: /*#__PURE__*/_jsxDEV(Table, {\n                    size: \"small\",\n                    children: [/*#__PURE__*/_jsxDEV(TableHead, {\n                      children: /*#__PURE__*/_jsxDEV(TableRow, {\n                        children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                          sx: {\n                            width: '5%'\n                          },\n                          children: \"Pos.\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 484,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          sx: {\n                            width: '40%'\n                          },\n                          children: \"Beschreibung\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 485,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          sx: {\n                            width: '10%'\n                          },\n                          align: \"right\",\n                          children: \"Menge\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 486,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          sx: {\n                            width: '10%'\n                          },\n                          children: \"Einheit\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 487,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          sx: {\n                            width: '10%'\n                          },\n                          align: \"right\",\n                          children: \"Einzelpreis\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 488,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          sx: {\n                            width: '10%'\n                          },\n                          align: \"right\",\n                          children: \"MwSt.(%)\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 489,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          sx: {\n                            width: '10%'\n                          },\n                          align: \"right\",\n                          children: \"Netto\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 490,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          sx: {\n                            width: '5%'\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 492,\n                          columnNumber: 27\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 483,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 482,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n                      children: [(Array.isArray(quote.items) ? quote.items : []).map((item, index) => /*#__PURE__*/_jsxDEV(TableRow, {\n                        children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                          children: item.position\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 498,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          children: /*#__PURE__*/_jsxDEV(TextField, {\n                            fullWidth: true,\n                            multiline: true // Für Freitext\n                            ,\n                            value: item.description || '',\n                            onChange: e => handleItemChange(index, 'description', e.target.value),\n                            variant: \"standard\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 500,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 499,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          align: \"right\",\n                          children: /*#__PURE__*/_jsxDEV(TextField, {\n                            type: \"number\",\n                            value: item.quantity || 1,\n                            onChange: e => handleItemChange(index, 'quantity', e.target.value),\n                            variant: \"standard\",\n                            inputProps: {\n                              min: 0,\n                              step: 0.1\n                            },\n                            sx: {\n                              width: '70px'\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 509,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 508,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          children: /*#__PURE__*/_jsxDEV(TextField, {\n                            value: item.unit || 'Stk',\n                            onChange: e => handleItemChange(index, 'unit', e.target.value),\n                            variant: \"standard\",\n                            sx: {\n                              width: '60px'\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 519,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 518,\n                          columnNumber: 30\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          align: \"right\",\n                          children: /*#__PURE__*/_jsxDEV(TextField, {\n                            type: \"number\",\n                            value: item.unit_price || 0,\n                            onChange: e => handleItemChange(index, 'unit_price', e.target.value),\n                            variant: \"standard\",\n                            inputProps: {\n                              min: 0,\n                              step: 0.01\n                            },\n                            sx: {\n                              width: '80px'\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 527,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 526,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          align: \"right\",\n                          children: /*#__PURE__*/_jsxDEV(TextField, {\n                            type: \"number\",\n                            value: item.vat_rate || 19,\n                            onChange: e => handleItemChange(index, 'vat_rate', e.target.value),\n                            variant: \"standard\",\n                            inputProps: {\n                              min: 0,\n                              max: 100,\n                              step: 1\n                            },\n                            sx: {\n                              width: '60px'\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 537,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 536,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          align: \"right\",\n                          children: formatCurrency(item.total_net)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 546,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          children: /*#__PURE__*/_jsxDEV(IconButton, {\n                            color: \"error\",\n                            onClick: () => handleRemoveItem(index),\n                            size: \"small\",\n                            children: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 556,\n                              columnNumber: 33\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 551,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 550,\n                          columnNumber: 29\n                        }, this)]\n                      }, index, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 497,\n                        columnNumber: 27\n                      }, this)), (Array.isArray(quote.items) ? quote.items : []).length === 0 && /*#__PURE__*/_jsxDEV(TableRow, {\n                        children: /*#__PURE__*/_jsxDEV(TableCell, {\n                          colSpan: 8,\n                          align: \"center\",\n                          children: /*#__PURE__*/_jsxDEV(Typography, {\n                            variant: \"body2\",\n                            color: \"textSecondary\",\n                            children: \"Keine Positionen vorhanden. Klicken Sie auf \\\"Position hinzuf\\xFCgen\\\".\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 564,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 563,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 562,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 495,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 481,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 480,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    display: 'flex',\n                    justifyContent: 'flex-end',\n                    mt: 2,\n                    flexDirection: 'column',\n                    alignItems: 'flex-end'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"h6\",\n                    children: [\"Gesamt Netto: \", formatCurrency(quote.total_net)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 575,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"h6\",\n                    children: [\"Gesamt Brutto: \", formatCurrency(quote.total_gross)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 578,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 574,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 466,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 464,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(FormCard, {\n              children: /*#__PURE__*/_jsxDEV(CardContent, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h6\",\n                  gutterBottom: true,\n                  children: \"Zus\\xE4tzliche Informationen\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 589,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  container: true,\n                  spacing: 2,\n                  children: /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      fullWidth: true,\n                      label: \"Notizen\",\n                      name: \"notes\",\n                      value: quote.notes || '',\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      margin: \"normal\",\n                      multiline: true,\n                      rows: 4\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 594,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 593,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 592,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 588,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 587,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 586,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: success,\n      autoHideDuration: 3000,\n      onClose: () => setSuccess(false),\n      anchorOrigin: {\n        vertical: 'bottom',\n        horizontal: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"success\",\n        sx: {\n          width: '100%'\n        },\n        onClose: () => setSuccess(false),\n        children: [\"Angebot erfolgreich \", isEditMode ? 'aktualisiert' : 'erstellt', \"!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 620,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 614,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: !!error,\n      autoHideDuration: 6000,\n      onClose: () => setError(null),\n      anchorOrigin: {\n        vertical: 'bottom',\n        horizontal: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        sx: {\n          width: '100%'\n        },\n        onClose: () => setError(null),\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 631,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 625,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 318,\n    columnNumber: 5\n  }, this);\n};\n_s(QuoteForm, \"MdD09r14Plm1+QjHdiWG8DHVau0=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c3 = QuoteForm;\nexport default QuoteForm;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"HeaderBox\");\n$RefreshReg$(_c2, \"FormCard\");\n$RefreshReg$(_c3, \"QuoteForm\");","map":{"version":3,"names":["React","useState","useEffect","Box","Typography","Paper","Button","TextField","Grid","Card","CardContent","FormControl","InputLabel","Select","MenuItem","CircularProgress","Snackbar","Alert","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","IconButton","styled","useNavigate","useParams","ArrowBackIcon","SaveIcon","AddIcon","DeleteIcon","axios","jsxDEV","_jsxDEV","API_URL","HeaderBox","theme","display","justifyContent","alignItems","marginBottom","spacing","_c","FormCard","_c2","formatCurrency","amount","numericAmount","Number","isNaN","Intl","NumberFormat","style","currency","format","QuoteForm","_s","id","navigate","loading","setLoading","saving","setSaving","error","setError","success","setSuccess","accounts","setAccounts","contacts","setContacts","products","setProducts","quote","setQuote","account_id","contact_id","property_id","quote_number","quote_date","Date","toISOString","split","valid_until","status","notes","total_net","total_gross","items","isEditMode","fetchAccounts","response","get","data","err","console","fetchContacts","some","c","prev","fetchProducts","fetchQuote","fetchedData","Array","isArray","message","_err$response","_err$response$data","handleChange","e","name","value","target","handleAddItem","description","quantity","unit","unit_price","vat_rate","position","length","handleRemoveItem","index","filter","_","i","handleItemChange","field","updatedItems","numericValue","includes","parseFloat","item","unitPrice","vatRate","calculateTotals","currentItems","totalNet","reduce","sum","totalGross","handleSubmit","preventDefault","submissionData","put","post","setTimeout","_err$response2","_err$response2$data","handleBack","sx","p","children","fileName","_jsxFileName","lineNumber","columnNumber","startIcon","onClick","mr","variant","color","disabled","onSubmit","container","xs","gutterBottom","md","fullWidth","margin","required","labelId","onChange","label","map","account","contact","first_name","last_name","type","InputLabelProps","shrink","mb","size","width","align","multiline","inputProps","min","step","max","colSpan","mt","flexDirection","rows","open","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","severity","_c3","$RefreshReg$"],"sources":["/Users/svenwinkler/CRM-Argus/frontend/src/pages/quotes/QuoteForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  Box, \n  Typography, \n  Paper, \n  Button, \n  TextField, \n  Grid,\n  Card,\n  CardContent,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  CircularProgress,\n  Snackbar,\n  Alert,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  IconButton\n} from '@mui/material';\nimport { styled } from '@mui/material/styles';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport SaveIcon from '@mui/icons-material/Save';\nimport AddIcon from '@mui/icons-material/Add';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport axios from 'axios';\n\n// API Service\nconst API_URL = 'http://localhost:3000/api';\n\n// Styled-Komponente für den Header-Bereich\nconst HeaderBox = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  justifyContent: 'space-between',\n  alignItems: 'center',\n  marginBottom: theme.spacing(3),\n}));\n\n// Styled-Komponente für die Form-Karte\nconst FormCard = styled(Card)(({ theme }) => ({\n  marginBottom: theme.spacing(3),\n}));\n\n// Funktion zum Formatieren von Währungsbeträgen\nconst formatCurrency = (amount) => {\n  const numericAmount = Number(amount);\n  if (isNaN(numericAmount)) {\n    return 'N/A';\n  }\n  return new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'EUR' }).format(numericAmount);\n};\n\nconst QuoteForm = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(false);\n  const [accounts, setAccounts] = useState([]);\n  const [contacts, setContacts] = useState([]); // State für Kontakte\n  const [products, setProducts] = useState([]);\n  const [quote, setQuote] = useState({\n    account_id: '',\n    contact_id: '', // Hinzugefügt\n    property_id: '', // Optional, falls benötigt\n    quote_number: '', // Geändert von title\n    quote_date: new Date().toISOString().split('T')[0], // Geändert von issue_date\n    valid_until: '',\n    status: 'created', // Geändert von draft\n    notes: '',\n    total_net: 0,\n    total_gross: 0,\n    items: []\n  });\n\n  const isEditMode = !!id;\n\n  // Accounts laden für die Auswahl\n  useEffect(() => {\n    const fetchAccounts = async () => {\n      try {\n        const response = await axios.get(`${API_URL}/accounts`);\n        if (response.data.success) {\n          setAccounts(response.data.data);\n        }\n      } catch (err) {\n        console.error('Fehler beim Abrufen der Accounts:', err);\n        setError('Fehler beim Laden der Accounts.');\n      }\n    };\n    fetchAccounts();\n  }, []);\n\n  // Kontakte laden, wenn ein Account ausgewählt wird\n  useEffect(() => {\n    if (quote.account_id) {\n      const fetchContacts = async () => {\n        try {\n          const response = await axios.get(`${API_URL}/accounts/${quote.account_id}/contacts`);\n          if (response.data.success) {\n            setContacts(response.data.data);\n            // Reset contact_id if the current one is not in the new list\n            if (!response.data.data.some(c => c.contact_id === quote.contact_id)) {\n              setQuote(prev => ({ ...prev, contact_id: '' }));\n            }\n          } else {\n            setContacts([]);\n            setQuote(prev => ({ ...prev, contact_id: '' }));\n          }\n        } catch (err) {\n          console.error('Fehler beim Abrufen der Kontakte:', err);\n          setContacts([]);\n          setQuote(prev => ({ ...prev, contact_id: '' }));\n          setError('Fehler beim Laden der Kontakte für diesen Account.');\n        }\n      };\n      fetchContacts();\n    } else {\n      setContacts([]); // Reset contacts if no account is selected\n      setQuote(prev => ({ ...prev, contact_id: '' }));\n    }\n  }, [quote.account_id]); // Abhängigkeit von account_id\n\n  // Produkte laden für die Auswahl (optional, da wir zu Freitext wechseln)\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        const response = await axios.get(`${API_URL}/products`);\n        if (response.data.success) {\n          setProducts(response.data.data);\n        }\n      } catch (err) {\n        console.error('Fehler beim Abrufen der Produkte:', err);\n        // setError('Fehler beim Laden der Produkte.'); // Optional\n      }\n    };\n    fetchProducts();\n  }, []);\n\n  // Angebots-Daten laden, wenn im Edit-Modus\n  useEffect(() => {\n    if (isEditMode) {\n      const fetchQuote = async () => {\n        try {\n          setLoading(true);\n          setError(null);\n          const response = await axios.get(`${API_URL}/quotes/${id}`);\n          if (response.data.success) {\n            const fetchedData = response.data.data;\n            // Stelle sicher, dass items ein Array ist\n            fetchedData.items = Array.isArray(fetchedData.items) ? fetchedData.items : [];\n            // Konvertiere Datumswerte für Input-Felder\n            fetchedData.quote_date = fetchedData.quote_date ? new Date(fetchedData.quote_date).toISOString().split('T')[0] : '';\n            fetchedData.valid_until = fetchedData.valid_until ? new Date(fetchedData.valid_until).toISOString().split('T')[0] : '';\n            setQuote(fetchedData);\n          } else {\n            setError(response.data.message || 'Fehler beim Laden der Angebots-Daten');\n          }\n        } catch (err) {\n          console.error('Fehler beim Abrufen des Angebots:', err);\n          setError(err.response?.data?.message || 'Fehler beim Laden der Angebots-Daten');\n        } finally {\n          setLoading(false);\n        }\n      };\n      fetchQuote();\n    }\n  }, [id, isEditMode]);\n\n  // Formular-Eingaben aktualisieren\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setQuote(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  // Neues Item zum Angebot hinzufügen\n  const handleAddItem = () => {\n    setQuote(prev => ({\n      ...prev,\n      items: [\n        ...(Array.isArray(prev.items) ? prev.items : []), // Sicherstellen, dass items ein Array ist\n        {\n          // product_id: '', // Vorerst entfernt für Freitext\n          description: '',\n          quantity: 1,\n          unit: 'Stk', // Standardeinheit\n          unit_price: 0,\n          vat_rate: 19, // Standard MwSt.\n          total_net: 0,\n          total_gross: 0,\n          position: (Array.isArray(prev.items) ? prev.items.length : 0) + 1 // Position automatisch setzen\n        }\n      ]\n    }));\n  };\n\n  // Item aus dem Angebot entfernen\n  const handleRemoveItem = (index) => {\n    setQuote(prev => ({\n      ...prev,\n      items: (Array.isArray(prev.items) ? prev.items : []).filter((_, i) => i !== index)\n    }));\n  };\n\n  // Item-Eingaben aktualisieren und Summen neu berechnen\n  const handleItemChange = (index, field, value) => {\n    setQuote(prev => {\n      const updatedItems = [...(Array.isArray(prev.items) ? prev.items : [])];\n      if (!updatedItems[index]) return prev; // Sicherheitscheck\n\n      let numericValue = value;\n      if (['quantity', 'unit_price', 'vat_rate'].includes(field)) {\n        numericValue = parseFloat(value) || 0;\n      }\n\n      updatedItems[index] = {\n        ...updatedItems[index],\n        [field]: numericValue\n      };\n\n      // Neuberechnung der Zeilensummen\n      const item = updatedItems[index];\n      const quantity = Number(item.quantity) || 0;\n      const unitPrice = Number(item.unit_price) || 0;\n      const vatRate = Number(item.vat_rate) || 0;\n      \n      item.total_net = quantity * unitPrice;\n      item.total_gross = item.total_net * (1 + vatRate / 100);\n\n      return {\n        ...prev,\n        items: updatedItems\n      };\n    });\n  };\n\n  // Gesamtbeträge neu berechnen, wenn sich Items ändern\n  useEffect(() => {\n    const calculateTotals = () => {\n      const currentItems = Array.isArray(quote.items) ? quote.items : [];\n      const totalNet = currentItems.reduce((sum, item) => sum + (Number(item.total_net) || 0), 0);\n      const totalGross = currentItems.reduce((sum, item) => sum + (Number(item.total_gross) || 0), 0);\n      setQuote(prev => ({\n        ...prev,\n        total_net: totalNet,\n        total_gross: totalGross\n      }));\n    };\n    calculateTotals();\n  }, [quote.items]);\n\n  // Formular absenden\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setSaving(true);\n    setError(null);\n    setSuccess(false);\n\n    // Stelle sicher, dass items ein Array ist\n    const submissionData = {\n        ...quote,\n        items: Array.isArray(quote.items) ? quote.items : []\n    };\n\n    // Entferne Felder, die nicht im Backend-Modell sind (falls nötig)\n    // delete submissionData.title; \n    // delete submissionData.description; // Wenn description nicht mehr im Hauptobjekt ist\n    // delete submissionData.issue_date;\n\n    try {\n      let response;\n      if (isEditMode) {\n        response = await axios.put(`${API_URL}/quotes/${id}`, submissionData);\n      } else {\n        response = await axios.post(`${API_URL}/quotes`, submissionData);\n      }\n\n      if (response.data.success) {\n        setSuccess(true);\n        setTimeout(() => {\n          navigate('/quotes');\n        }, 1500);\n      } else {\n        setError(response.data.message || 'Fehler beim Speichern des Angebots');\n      }\n    } catch (err) {\n      console.error('Fehler beim Speichern des Angebots:', err);\n      setError(err.response?.data?.message || 'Fehler beim Speichern des Angebots');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // Zurück zur Angebots-Liste\n  const handleBack = () => {\n    navigate('/quotes');\n  };\n\n  if (loading && isEditMode) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', p: 3 }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  return (\n    <Box>\n      <HeaderBox>\n        <Box sx={{ display: 'flex', alignItems: 'center' }}>\n          <Button \n            startIcon={<ArrowBackIcon />} \n            onClick={handleBack}\n            sx={{ mr: 2 }}\n          >\n            Zurück\n          </Button>\n          <Typography variant=\"h4\">\n            {isEditMode ? `Angebot #${quote.quote_number} bearbeiten` : 'Neues Angebot erstellen'}\n          </Typography>\n        </Box>\n        <Button \n          variant=\"contained\" \n          color=\"primary\" \n          startIcon={<SaveIcon />}\n          onClick={handleSubmit}\n          disabled={saving || !quote.account_id || !quote.contact_id} // Speichern deaktivieren, wenn kein Account/Kontakt gewählt\n        >\n          {saving ? 'Wird gespeichert...' : 'Speichern'}\n        </Button>\n      </HeaderBox>\n\n      <Paper sx={{ p: 3 }}>\n        <form onSubmit={handleSubmit}>\n          <Grid container spacing={3}>\n            <Grid item xs={12}>\n              <FormCard>\n                <CardContent>\n                  <Typography variant=\"h6\" gutterBottom>\n                    Allgemeine Informationen\n                  </Typography>\n                  <Grid container spacing={2}>\n                    <Grid item xs={12} md={6}>\n                      <FormControl fullWidth margin=\"normal\" required>\n                        <InputLabel id=\"account-select-label\">Account *</InputLabel>\n                        <Select\n                          labelId=\"account-select-label\"\n                          id=\"account-select\"\n                          name=\"account_id\"\n                          value={quote.account_id || ''}\n                          onChange={handleChange}\n                          label=\"Account *\"\n                        >\n                          <MenuItem value=\"\">\n                            <em>Account auswählen</em>\n                          </MenuItem>\n                          {accounts.map((account) => (\n                            <MenuItem key={account.account_id} value={account.account_id}>\n                              {account.name}\n                            </MenuItem>\n                          ))}\n                        </Select>\n                      </FormControl>\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                      {/* *** NEUES Kontakt Auswahlfeld *** */}\n                      <FormControl fullWidth margin=\"normal\" required disabled={!quote.account_id}> \n                        <InputLabel id=\"contact-select-label\">Kontakt *</InputLabel>\n                        <Select\n                          labelId=\"contact-select-label\"\n                          id=\"contact-select\"\n                          name=\"contact_id\"\n                          value={quote.contact_id || ''}\n                          onChange={handleChange}\n                          label=\"Kontakt *\"\n                        >\n                          <MenuItem value=\"\">\n                            <em>Kontakt auswählen</em>\n                          </MenuItem>\n                          {contacts.map((contact) => (\n                            <MenuItem key={contact.contact_id} value={contact.contact_id}>\n                              {`${contact.first_name} ${contact.last_name}`}\n                            </MenuItem>\n                          ))}\n                        </Select>\n                      </FormControl>\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                       <TextField\n                        fullWidth\n                        required\n                        label=\"Angebotsnummer *\"\n                        name=\"quote_number\" // Geändert von title\n                        value={quote.quote_number || ''}\n                        onChange={handleChange}\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                      />\n                    </Grid>\n                     <Grid item xs={12} md={6}>\n                      <FormControl fullWidth margin=\"normal\">\n                        <InputLabel id=\"status-select-label\">Status</InputLabel>\n                        <Select\n                          labelId=\"status-select-label\"\n                          id=\"status-select\"\n                          name=\"status\"\n                          value={quote.status || 'created'}\n                          onChange={handleChange}\n                          label=\"Status\"\n                        >\n                          <MenuItem value=\"created\">Erstellt</MenuItem>\n                          <MenuItem value=\"sent\">Gesendet</MenuItem>\n                          <MenuItem value=\"accepted\">Akzeptiert</MenuItem>\n                          <MenuItem value=\"rejected\">Abgelehnt</MenuItem>\n                        </Select>\n                      </FormControl>\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                      <TextField\n                        fullWidth\n                        required\n                        label=\"Angebotsdatum *\"\n                        name=\"quote_date\" // Geändert von issue_date\n                        type=\"date\"\n                        value={quote.quote_date || ''}\n                        onChange={handleChange}\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        InputLabelProps={{\n                          shrink: true,\n                        }}\n                      />\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                      <TextField\n                        fullWidth\n                        label=\"Gültig bis\"\n                        name=\"valid_until\"\n                        type=\"date\"\n                        value={quote.valid_until || ''}\n                        onChange={handleChange}\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        InputLabelProps={{\n                          shrink: true,\n                        }}\n                      />\n                    </Grid>\n                  </Grid>\n                </CardContent>\n              </FormCard>\n            </Grid>\n\n            <Grid item xs={12}>\n              <FormCard>\n                <CardContent>\n                  <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n                    <Typography variant=\"h6\">\n                      Positionen\n                    </Typography>\n                    <Button \n                      variant=\"outlined\" \n                      startIcon={<AddIcon />} \n                      onClick={handleAddItem}\n                    >\n                      Position hinzufügen\n                    </Button>\n                  </Box>\n                  \n                  <TableContainer>\n                    <Table size=\"small\">\n                      <TableHead>\n                        <TableRow>\n                          <TableCell sx={{ width: '5%' }}>Pos.</TableCell>\n                          <TableCell sx={{ width: '40%' }}>Beschreibung</TableCell>\n                          <TableCell sx={{ width: '10%' }} align=\"right\">Menge</TableCell>\n                          <TableCell sx={{ width: '10%' }}>Einheit</TableCell>\n                          <TableCell sx={{ width: '10%' }} align=\"right\">Einzelpreis</TableCell>\n                          <TableCell sx={{ width: '10%' }} align=\"right\">MwSt.(%)</TableCell>\n                          <TableCell sx={{ width: '10%' }} align=\"right\">Netto</TableCell>\n                          {/* <TableCell align=\"right\">Brutto</TableCell> */}\n                          <TableCell sx={{ width: '5%' }}></TableCell>\n                        </TableRow>\n                      </TableHead>\n                      <TableBody>\n                        {(Array.isArray(quote.items) ? quote.items : []).map((item, index) => (\n                          <TableRow key={index}>\n                            <TableCell>{item.position}</TableCell>\n                            <TableCell>\n                              <TextField\n                                fullWidth\n                                multiline // Für Freitext\n                                value={item.description || ''}\n                                onChange={(e) => handleItemChange(index, 'description', e.target.value)}\n                                variant=\"standard\"\n                              />\n                            </TableCell>\n                            <TableCell align=\"right\">\n                              <TextField\n                                type=\"number\"\n                                value={item.quantity || 1}\n                                onChange={(e) => handleItemChange(index, 'quantity', e.target.value)}\n                                variant=\"standard\"\n                                inputProps={{ min: 0, step: 0.1 }}\n                                sx={{ width: '70px' }}\n                              />\n                            </TableCell>\n                             <TableCell>\n                              <TextField\n                                value={item.unit || 'Stk'}\n                                onChange={(e) => handleItemChange(index, 'unit', e.target.value)}\n                                variant=\"standard\"\n                                sx={{ width: '60px' }}\n                              />\n                            </TableCell>\n                            <TableCell align=\"right\">\n                              <TextField\n                                type=\"number\"\n                                value={item.unit_price || 0}\n                                onChange={(e) => handleItemChange(index, 'unit_price', e.target.value)}\n                                variant=\"standard\"\n                                inputProps={{ min: 0, step: 0.01 }}\n                                sx={{ width: '80px' }}\n                              />\n                            </TableCell>\n                            <TableCell align=\"right\">\n                              <TextField\n                                type=\"number\"\n                                value={item.vat_rate || 19}\n                                onChange={(e) => handleItemChange(index, 'vat_rate', e.target.value)}\n                                variant=\"standard\"\n                                inputProps={{ min: 0, max: 100, step: 1 }}\n                                sx={{ width: '60px' }}\n                              />\n                            </TableCell>\n                            <TableCell align=\"right\">\n                              {formatCurrency(item.total_net)}\n                            </TableCell>\n                            {/* <TableCell align=\"right\">{formatCurrency(item.total_gross)}</TableCell> */}\n                            <TableCell>\n                              <IconButton \n                                color=\"error\" \n                                onClick={() => handleRemoveItem(index)}\n                                size=\"small\"\n                              >\n                                <DeleteIcon />\n                              </IconButton>\n                            </TableCell>\n                          </TableRow>\n                        ))}\n                        {(Array.isArray(quote.items) ? quote.items : []).length === 0 && (\n                          <TableRow>\n                            <TableCell colSpan={8} align=\"center\">\n                              <Typography variant=\"body2\" color=\"textSecondary\">\n                                Keine Positionen vorhanden. Klicken Sie auf \"Position hinzufügen\".\n                              </Typography>\n                            </TableCell>\n                          </TableRow>\n                        )}\n                      </TableBody>\n                    </Table>\n                  </TableContainer>\n                  \n                  <Box sx={{ display: 'flex', justifyContent: 'flex-end', mt: 2, flexDirection: 'column', alignItems: 'flex-end' }}>\n                    <Typography variant=\"h6\">\n                      Gesamt Netto: {formatCurrency(quote.total_net)}\n                    </Typography>\n                    <Typography variant=\"h6\">\n                      Gesamt Brutto: {formatCurrency(quote.total_gross)}\n                    </Typography>\n                  </Box>\n                </CardContent>\n              </FormCard>\n            </Grid>\n\n            <Grid item xs={12}>\n              <FormCard>\n                <CardContent>\n                  <Typography variant=\"h6\" gutterBottom>\n                    Zusätzliche Informationen\n                  </Typography>\n                  <Grid container spacing={2}>\n                    <Grid item xs={12}>\n                      <TextField\n                        fullWidth\n                        label=\"Notizen\"\n                        name=\"notes\"\n                        value={quote.notes || ''}\n                        onChange={handleChange}\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        multiline\n                        rows={4}\n                      />\n                    </Grid>\n                  </Grid>\n                </CardContent>\n              </FormCard>\n            </Grid>\n          </Grid>\n        </form>\n      </Paper>\n\n      <Snackbar \n        open={success} \n        autoHideDuration={3000} \n        onClose={() => setSuccess(false)}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n      >\n        <Alert severity=\"success\" sx={{ width: '100%' }} onClose={() => setSuccess(false)}>\n          Angebot erfolgreich {isEditMode ? 'aktualisiert' : 'erstellt'}!\n        </Alert>\n      </Snackbar>\n\n      <Snackbar \n        open={!!error} \n        autoHideDuration={6000} \n        onClose={() => setError(null)}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n      >\n        <Alert severity=\"error\" sx={{ width: '100%' }} onClose={() => setError(null)}>\n          {error}\n        </Alert>\n      </Snackbar>\n    </Box>\n  );\n};\n\nexport default QuoteForm;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}