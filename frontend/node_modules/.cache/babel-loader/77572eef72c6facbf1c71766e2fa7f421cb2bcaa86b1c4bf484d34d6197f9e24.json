{"ast":null,"code":"var _jsxFileName = \"/Users/svenwinkler/CRM-Argus/frontend/src/pages/quotes/QuoteForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Box, Typography, Paper, Button, TextField, Grid, Card, CardContent, FormControl, InputLabel, Select, MenuItem, CircularProgress, Snackbar, Alert, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, IconButton } from '@mui/material';\nimport { styled } from '@mui/material/styles';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport SaveIcon from '@mui/icons-material/Save';\nimport AddIcon from '@mui/icons-material/Add';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport axios from 'axios';\n\n// API Service\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:3000/api';\n\n// Styled-Komponente für den Header-Bereich\nconst HeaderBox = styled(Box)(({\n  theme\n}) => ({\n  display: 'flex',\n  justifyContent: 'space-between',\n  alignItems: 'center',\n  marginBottom: theme.spacing(3)\n}));\n\n// Styled-Komponente für die Form-Karte\n_c = HeaderBox;\nconst FormCard = styled(Card)(({\n  theme\n}) => ({\n  marginBottom: theme.spacing(3)\n}));\n\n// Funktion zum Formatieren von Währungsbeträgen\n_c2 = FormCard;\nconst formatCurrency = amount => {\n  const numericAmount = Number(amount);\n  if (isNaN(numericAmount)) {\n    return 'N/A';\n  }\n  return new Intl.NumberFormat('de-DE', {\n    style: 'currency',\n    currency: 'EUR'\n  }).format(numericAmount);\n};\nconst QuoteForm = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(false);\n  const [accounts, setAccounts] = useState([]);\n  const [properties, setProperties] = useState([]); // State für Hausobjekte\n  const [products, setProducts] = useState([]);\n  const [quote, setQuote] = useState({\n    account_id: '',\n    property_id: '',\n    // Hausobjekt ist jetzt Pflicht\n    // contact_id: '', // Entfernt\n    quote_number: '',\n    quote_date: new Date().toISOString().split('T')[0],\n    valid_until: '',\n    status: 'created',\n    notes: '',\n    total_net: 0,\n    total_gross: 0,\n    items: []\n  });\n  const isEditMode = !!id;\n\n  // Accounts laden für die Auswahl\n  useEffect(() => {\n    const fetchAccounts = async () => {\n      try {\n        const response = await axios.get(`${API_URL}/accounts`);\n        if (response.data.success) {\n          setAccounts(response.data.data);\n        }\n      } catch (err) {\n        console.error('Fehler beim Abrufen der Accounts:', err);\n        setError('Fehler beim Laden der Accounts.');\n      }\n    };\n    fetchAccounts();\n  }, []);\n\n  // *** GEÄNDERT: Hausobjekte laden, wenn ein Account ausgewählt wird ***\n  useEffect(() => {\n    if (quote.account_id) {\n      const fetchProperties = async () => {\n        try {\n          const response = await axios.get(`${API_URL}/accounts/${quote.account_id}/properties`);\n          if (response.data.success) {\n            setProperties(response.data.data);\n            // Reset property_id if the current one is not in the new list\n            if (!response.data.data.some(p => p.property_id === quote.property_id)) {\n              setQuote(prev => ({\n                ...prev,\n                property_id: ''\n              }));\n            }\n          } else {\n            setProperties([]);\n            setQuote(prev => ({\n              ...prev,\n              property_id: ''\n            }));\n          }\n        } catch (err) {\n          console.error('Fehler beim Abrufen der Hausobjekte:', err);\n          setProperties([]);\n          setQuote(prev => ({\n            ...prev,\n            property_id: ''\n          }));\n          setError('Fehler beim Laden der Hausobjekte für diesen Account.');\n        }\n      };\n      fetchProperties();\n    } else {\n      setProperties([]); // Reset properties if no account is selected\n      setQuote(prev => ({\n        ...prev,\n        property_id: ''\n      }));\n    }\n  }, [quote.account_id]); // Abhängigkeit von account_id\n  // *** ENDE GEÄNDERT ***\n\n  // Produkte laden für die Auswahl (optional, da wir zu Freitext wechseln)\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        const response = await axios.get(`${API_URL}/products`);\n        if (response.data.success) {\n          setProducts(response.data.data);\n        }\n      } catch (err) {\n        console.error('Fehler beim Abrufen der Produkte:', err);\n        // setError('Fehler beim Laden der Produkte.'); // Optional\n      }\n    };\n    fetchProducts();\n  }, []);\n\n  // Angebots-Daten laden, wenn im Edit-Modus\n  useEffect(() => {\n    if (isEditMode) {\n      const fetchQuote = async () => {\n        try {\n          setLoading(true);\n          setError(null);\n          const response = await axios.get(`${API_URL}/quotes/${id}`);\n          if (response.data.success) {\n            const fetchedData = response.data.data;\n            // Stelle sicher, dass items ein Array ist\n            fetchedData.items = Array.isArray(fetchedData.items) ? fetchedData.items : [];\n            // Konvertiere Datumswerte für Input-Felder\n            fetchedData.quote_date = fetchedData.quote_date ? new Date(fetchedData.quote_date).toISOString().split('T')[0] : '';\n            fetchedData.valid_until = fetchedData.valid_until ? new Date(fetchedData.valid_until).toISOString().split('T')[0] : '';\n            // Entferne contact_id, falls es noch vom Backend kommt (sollte nicht, aber sicher ist sicher)\n            delete fetchedData.contact_id;\n            setQuote(fetchedData);\n          } else {\n            setError(response.data.message || 'Fehler beim Laden der Angebots-Daten');\n          }\n        } catch (err) {\n          var _err$response, _err$response$data;\n          console.error('Fehler beim Abrufen des Angebots:', err);\n          setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Fehler beim Laden der Angebots-Daten');\n        } finally {\n          setLoading(false);\n        }\n      };\n      fetchQuote();\n    }\n  }, [id, isEditMode]);\n\n  // Formular-Eingaben aktualisieren\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setQuote(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  // Neues Item zum Angebot hinzufügen\n  const handleAddItem = () => {\n    setQuote(prev => ({\n      ...prev,\n      items: [...(Array.isArray(prev.items) ? prev.items : []),\n      // Sicherstellen, dass items ein Array ist\n      {\n        // product_id: '', // Vorerst entfernt für Freitext\n        description: '',\n        quantity: 1,\n        unit: 'Stk',\n        // Standardeinheit\n        unit_price: 0,\n        vat_rate: 19,\n        // Standard MwSt.\n        total_net: 0,\n        total_gross: 0,\n        position: (Array.isArray(prev.items) ? prev.items.length : 0) + 1 // Position automatisch setzen\n      }]\n    }));\n  };\n\n  // Item aus dem Angebot entfernen\n  const handleRemoveItem = index => {\n    setQuote(prev => ({\n      ...prev,\n      items: (Array.isArray(prev.items) ? prev.items : []).filter((_, i) => i !== index)\n    }));\n  };\n\n  // Item-Eingaben aktualisieren und Summen neu berechnen\n  const handleItemChange = (index, field, value) => {\n    setQuote(prev => {\n      const updatedItems = [...(Array.isArray(prev.items) ? prev.items : [])];\n      if (!updatedItems[index]) return prev; // Sicherheitscheck\n\n      let numericValue = value;\n      if (['quantity', 'unit_price', 'vat_rate'].includes(field)) {\n        numericValue = parseFloat(value) || 0;\n      }\n      updatedItems[index] = {\n        ...updatedItems[index],\n        [field]: numericValue\n      };\n\n      // Neuberechnung der Zeilensummen\n      const item = updatedItems[index];\n      const quantity = Number(item.quantity) || 0;\n      const unitPrice = Number(item.unit_price) || 0;\n      const vatRate = Number(item.vat_rate) || 0;\n      item.total_net = quantity * unitPrice;\n      item.total_gross = item.total_net * (1 + vatRate / 100);\n      return {\n        ...prev,\n        items: updatedItems\n      };\n    });\n  };\n\n  // Gesamtbeträge neu berechnen, wenn sich Items ändern\n  useEffect(() => {\n    const calculateTotals = () => {\n      const currentItems = Array.isArray(quote.items) ? quote.items : [];\n      const totalNet = currentItems.reduce((sum, item) => sum + (Number(item.total_net) || 0), 0);\n      const totalGross = currentItems.reduce((sum, item) => sum + (Number(item.total_gross) || 0), 0);\n      setQuote(prev => ({\n        ...prev,\n        total_net: totalNet,\n        total_gross: totalGross\n      }));\n    };\n    calculateTotals();\n  }, [quote.items]);\n\n  // Formular absenden\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setSaving(true);\n    setError(null);\n    setSuccess(false);\n\n    // Stelle sicher, dass items ein Array ist\n    const submissionData = {\n      ...quote,\n      items: Array.isArray(quote.items) ? quote.items : []\n    };\n\n    // Entferne contact_id explizit vor dem Senden\n    delete submissionData.contact_id;\n    try {\n      let response;\n      if (isEditMode) {\n        response = await axios.put(`${API_URL}/quotes/${id}`, submissionData);\n      } else {\n        response = await axios.post(`${API_URL}/quotes`, submissionData);\n      }\n      if (response.data.success) {\n        setSuccess(true);\n        setTimeout(() => {\n          navigate('/quotes');\n        }, 1500);\n      } else {\n        setError(response.data.message || 'Fehler beim Speichern des Angebots');\n      }\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      console.error('Fehler beim Speichern des Angebots:', err);\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || 'Fehler beim Speichern des Angebots');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // Zurück zur Angebots-Liste\n  const handleBack = () => {\n    navigate('/quotes');\n  };\n  if (loading && isEditMode) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        justifyContent: 'center',\n        p: 3\n      },\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: [/*#__PURE__*/_jsxDEV(HeaderBox, {\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          startIcon: /*#__PURE__*/_jsxDEV(ArrowBackIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 24\n          }, this),\n          onClick: handleBack,\n          sx: {\n            mr: 2\n          },\n          children: \"Zur\\xFCck\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          children: isEditMode ? `Angebot #${quote.quote_number} bearbeiten` : 'Neues Angebot erstellen'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        startIcon: /*#__PURE__*/_jsxDEV(SaveIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 22\n        }, this),\n        onClick: handleSubmit\n        // *** GEÄNDERT: Speichern deaktivieren, wenn kein Account/Hausobjekt gewählt ***\n        ,\n        disabled: saving || !quote.account_id || !quote.property_id,\n        children: saving ? 'Wird gespeichert...' : 'Speichern'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      sx: {\n        p: 3\n      },\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(FormCard, {\n              children: /*#__PURE__*/_jsxDEV(CardContent, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h6\",\n                  gutterBottom: true,\n                  children: \"Allgemeine Informationen\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 351,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  container: true,\n                  spacing: 2,\n                  children: [/*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    md: 6,\n                    children: /*#__PURE__*/_jsxDEV(FormControl, {\n                      fullWidth: true,\n                      margin: \"normal\",\n                      required: true,\n                      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                        id: \"account-select-label\",\n                        children: \"Account *\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 357,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(Select, {\n                        labelId: \"account-select-label\",\n                        id: \"account-select\",\n                        name: \"account_id\",\n                        value: quote.account_id || '',\n                        onChange: handleChange,\n                        label: \"Account *\",\n                        children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: \"\",\n                          children: /*#__PURE__*/_jsxDEV(\"em\", {\n                            children: \"Account ausw\\xE4hlen\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 367,\n                            columnNumber: 29\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 366,\n                          columnNumber: 27\n                        }, this), accounts.map(account => /*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: account.account_id,\n                          children: account.name\n                        }, account.account_id, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 370,\n                          columnNumber: 29\n                        }, this))]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 358,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 356,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 355,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    md: 6,\n                    children: /*#__PURE__*/_jsxDEV(FormControl, {\n                      fullWidth: true,\n                      margin: \"normal\",\n                      required: true,\n                      disabled: !quote.account_id,\n                      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                        id: \"property-select-label\",\n                        children: \"Hausobjekt *\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 380,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(Select, {\n                        labelId: \"property-select-label\",\n                        id: \"property-select\",\n                        name: \"property_id\",\n                        value: quote.property_id || '',\n                        onChange: handleChange,\n                        label: \"Hausobjekt *\",\n                        children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: \"\",\n                          children: /*#__PURE__*/_jsxDEV(\"em\", {\n                            children: \"Hausobjekt ausw\\xE4hlen\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 390,\n                            columnNumber: 29\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 389,\n                          columnNumber: 27\n                        }, this), properties.map(property => /*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: property.property_id,\n                          children: `${property.street} ${property.house_number}, ${property.zip_code} ${property.city}`\n                        }, property.property_id, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 393,\n                          columnNumber: 29\n                        }, this))]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 381,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 379,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 378,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    md: 6,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      fullWidth: true,\n                      required: true,\n                      label: \"Angebotsnummer *\",\n                      name: \"quote_number\",\n                      value: quote.quote_number || '',\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      margin: \"normal\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 402,\n                      columnNumber: 24\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 401,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    md: 6,\n                    children: /*#__PURE__*/_jsxDEV(FormControl, {\n                      fullWidth: true,\n                      margin: \"normal\",\n                      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                        id: \"status-select-label\",\n                        children: \"Status\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 415,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(Select, {\n                        labelId: \"status-select-label\",\n                        id: \"status-select\",\n                        name: \"status\",\n                        value: quote.status || 'created',\n                        onChange: handleChange,\n                        label: \"Status\",\n                        children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: \"created\",\n                          children: \"Erstellt\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 424,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: \"sent\",\n                          children: \"Gesendet\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 425,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: \"accepted\",\n                          children: \"Akzeptiert\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 426,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: \"rejected\",\n                          children: \"Abgelehnt\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 427,\n                          columnNumber: 27\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 416,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 414,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 413,\n                    columnNumber: 22\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    md: 6,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      fullWidth: true,\n                      required: true,\n                      label: \"Angebotsdatum *\",\n                      name: \"quote_date\",\n                      type: \"date\",\n                      value: quote.quote_date || '',\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      margin: \"normal\",\n                      InputLabelProps: {\n                        shrink: true\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 432,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 431,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    md: 6,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      fullWidth: true,\n                      label: \"G\\xFCltig bis\",\n                      name: \"valid_until\",\n                      type: \"date\",\n                      value: quote.valid_until || '',\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      margin: \"normal\",\n                      InputLabelProps: {\n                        shrink: true\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 448,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 447,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 354,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(FormCard, {\n              children: /*#__PURE__*/_jsxDEV(CardContent, {\n                children: [/*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                    mb: 2\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"h6\",\n                    children: \"Positionen\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 471,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"outlined\",\n                    startIcon: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 476,\n                      columnNumber: 34\n                    }, this),\n                    onClick: handleAddItem,\n                    children: \"Position hinzuf\\xFCgen\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 474,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 470,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(TableContainer, {\n                  children: /*#__PURE__*/_jsxDEV(Table, {\n                    size: \"small\",\n                    children: [/*#__PURE__*/_jsxDEV(TableHead, {\n                      children: /*#__PURE__*/_jsxDEV(TableRow, {\n                        children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                          sx: {\n                            width: '5%'\n                          },\n                          children: \"Pos.\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 487,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          sx: {\n                            width: '40%'\n                          },\n                          children: \"Beschreibung\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 488,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          sx: {\n                            width: '10%'\n                          },\n                          align: \"right\",\n                          children: \"Menge\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 489,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          sx: {\n                            width: '10%'\n                          },\n                          children: \"Einheit\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 490,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          sx: {\n                            width: '10%'\n                          },\n                          align: \"right\",\n                          children: \"Einzelpreis\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 491,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          sx: {\n                            width: '10%'\n                          },\n                          align: \"right\",\n                          children: \"MwSt.(%)\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 492,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          sx: {\n                            width: '10%'\n                          },\n                          align: \"right\",\n                          children: \"Netto\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 493,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          sx: {\n                            width: '5%'\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 495,\n                          columnNumber: 27\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 486,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 485,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n                      children: (Array.isArray(quote.items) ? quote.items : []).map((item, index) => /*#__PURE__*/_jsxDEV(TableRow, {\n                        children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                          children: item.position\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 501,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          children: /*#__PURE__*/_jsxDEV(TextField, {\n                            fullWidth: true,\n                            multiline: true // Für Freitext\n                            ,\n                            value: item.description || '',\n                            onChange: e => handleItemChange(index, 'description', e.target.value),\n                            variant: \"standard\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 503,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 502,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          align: \"right\",\n                          children: /*#__PURE__*/_jsxDEV(TextField, {\n                            type: \"number\",\n                            value: item.quantity || 1,\n                            onChange: e => handleItemChange(index, 'quantity', e.target.value),\n                            variant: \"standard\",\n                            inputProps: {\n                              min: 0,\n                              step: 0.1\n                            },\n                            sx: {\n                              width: '70px'\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 512,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 511,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          children: /*#__PURE__*/_jsxDEV(TextField, {\n                            value: item.unit || 'Stk',\n                            onChange: e => handleItemChange(index, 'unit', e.target.value),\n                            variant: \"standard\",\n                            sx: {\n                              width: '60px'\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 522,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 521,\n                          columnNumber: 30\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          align: \"right\",\n                          children: /*#__PURE__*/_jsxDEV(TextField, {\n                            type: \"number\",\n                            value: item.unit_price || 0,\n                            onChange: e => handleItemChange(index, 'unit_price', e.target.value),\n                            variant: \"standard\",\n                            inputProps: {\n                              min: 0,\n                              step: 0.01\n                            },\n                            sx: {\n                              width: '80px'\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 530,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 529,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          align: \"right\",\n                          children: /*#__PURE__*/_jsxDEV(TextField, {\n                            type: \"number\",\n                            value: item.vat_rate || 19,\n                            onChange: e => handleItemChange(index, 'vat_rate', e.target.value),\n                            variant: \"standard\",\n                            inputProps: {\n                              min: 0,\n                              step: 1\n                            },\n                            sx: {\n                              width: '60px'\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 540,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 539,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          align: \"right\",\n                          children: formatCurrency(item.total_net)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 549,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          align: \"center\",\n                          children: /*#__PURE__*/_jsxDEV(IconButton, {\n                            onClick: () => handleRemoveItem(index),\n                            size: \"small\",\n                            children: /*#__PURE__*/_jsxDEV(DeleteIcon, {\n                              fontSize: \"small\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 553,\n                              columnNumber: 33\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 552,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 551,\n                          columnNumber: 29\n                        }, this)]\n                      }, index, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 500,\n                        columnNumber: 27\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 498,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 484,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 483,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 469,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 468,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 467,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(FormCard, {\n              children: /*#__PURE__*/_jsxDEV(CardContent, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h6\",\n                  gutterBottom: true,\n                  children: \"Zusammenfassung & Notizen\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 568,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  container: true,\n                  spacing: 2,\n                  children: [/*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    md: 6,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      fullWidth: true,\n                      multiline: true,\n                      rows: 4,\n                      label: \"Notizen\",\n                      name: \"notes\",\n                      value: quote.notes || '',\n                      onChange: handleChange,\n                      variant: \"outlined\",\n                      margin: \"normal\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 573,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 572,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    md: 6,\n                    children: /*#__PURE__*/_jsxDEV(Box, {\n                      sx: {\n                        textAlign: 'right',\n                        mt: 2\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(Typography, {\n                        variant: \"subtitle1\",\n                        children: [\"Gesamt Netto: \", formatCurrency(quote.total_net)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 587,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                        variant: \"h6\",\n                        children: [\"Gesamt Brutto: \", formatCurrency(quote.total_gross)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 588,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 586,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 585,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 571,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 567,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 566,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 565,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: success,\n      autoHideDuration: 6000,\n      onClose: () => setSuccess(false),\n      anchorOrigin: {\n        vertical: 'bottom',\n        horizontal: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        onClose: () => setSuccess(false),\n        severity: \"success\",\n        sx: {\n          width: '100%'\n        },\n        children: \"Angebot erfolgreich gespeichert!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 601,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 600,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: !!error,\n      autoHideDuration: 6000,\n      onClose: () => setError(null),\n      anchorOrigin: {\n        vertical: 'bottom',\n        horizontal: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        onClose: () => setError(null),\n        severity: \"error\",\n        sx: {\n          width: '100%'\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 606,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 605,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 319,\n    columnNumber: 5\n  }, this);\n};\n_s(QuoteForm, \"bC2aTol+4cHa1kW1FpdPjCibAZM=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c3 = QuoteForm;\nexport default QuoteForm;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"HeaderBox\");\n$RefreshReg$(_c2, \"FormCard\");\n$RefreshReg$(_c3, \"QuoteForm\");","map":{"version":3,"names":["React","useState","useEffect","Box","Typography","Paper","Button","TextField","Grid","Card","CardContent","FormControl","InputLabel","Select","MenuItem","CircularProgress","Snackbar","Alert","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","IconButton","styled","useNavigate","useParams","ArrowBackIcon","SaveIcon","AddIcon","DeleteIcon","axios","jsxDEV","_jsxDEV","API_URL","HeaderBox","theme","display","justifyContent","alignItems","marginBottom","spacing","_c","FormCard","_c2","formatCurrency","amount","numericAmount","Number","isNaN","Intl","NumberFormat","style","currency","format","QuoteForm","_s","id","navigate","loading","setLoading","saving","setSaving","error","setError","success","setSuccess","accounts","setAccounts","properties","setProperties","products","setProducts","quote","setQuote","account_id","property_id","quote_number","quote_date","Date","toISOString","split","valid_until","status","notes","total_net","total_gross","items","isEditMode","fetchAccounts","response","get","data","err","console","fetchProperties","some","p","prev","fetchProducts","fetchQuote","fetchedData","Array","isArray","contact_id","message","_err$response","_err$response$data","handleChange","e","name","value","target","handleAddItem","description","quantity","unit","unit_price","vat_rate","position","length","handleRemoveItem","index","filter","_","i","handleItemChange","field","updatedItems","numericValue","includes","parseFloat","item","unitPrice","vatRate","calculateTotals","currentItems","totalNet","reduce","sum","totalGross","handleSubmit","preventDefault","submissionData","put","post","setTimeout","_err$response2","_err$response2$data","handleBack","sx","children","fileName","_jsxFileName","lineNumber","columnNumber","startIcon","onClick","mr","variant","color","disabled","onSubmit","container","xs","gutterBottom","md","fullWidth","margin","required","labelId","onChange","label","map","account","property","street","house_number","zip_code","city","type","InputLabelProps","shrink","mb","size","width","align","multiline","inputProps","min","step","fontSize","rows","textAlign","mt","open","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","severity","_c3","$RefreshReg$"],"sources":["/Users/svenwinkler/CRM-Argus/frontend/src/pages/quotes/QuoteForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  Box, \n  Typography, \n  Paper, \n  Button, \n  TextField, \n  Grid,\n  Card,\n  CardContent,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  CircularProgress,\n  Snackbar,\n  Alert,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  IconButton\n} from '@mui/material';\nimport { styled } from '@mui/material/styles';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport SaveIcon from '@mui/icons-material/Save';\nimport AddIcon from '@mui/icons-material/Add';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport axios from 'axios';\n\n// API Service\nconst API_URL = 'http://localhost:3000/api';\n\n// Styled-Komponente für den Header-Bereich\nconst HeaderBox = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  justifyContent: 'space-between',\n  alignItems: 'center',\n  marginBottom: theme.spacing(3),\n}));\n\n// Styled-Komponente für die Form-Karte\nconst FormCard = styled(Card)(({ theme }) => ({\n  marginBottom: theme.spacing(3),\n}));\n\n// Funktion zum Formatieren von Währungsbeträgen\nconst formatCurrency = (amount) => {\n  const numericAmount = Number(amount);\n  if (isNaN(numericAmount)) {\n    return 'N/A';\n  }\n  return new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'EUR' }).format(numericAmount);\n};\n\nconst QuoteForm = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(false);\n  const [accounts, setAccounts] = useState([]);\n  const [properties, setProperties] = useState([]); // State für Hausobjekte\n  const [products, setProducts] = useState([]);\n  const [quote, setQuote] = useState({\n    account_id: '',\n    property_id: '', // Hausobjekt ist jetzt Pflicht\n    // contact_id: '', // Entfernt\n    quote_number: '', \n    quote_date: new Date().toISOString().split('T')[0], \n    valid_until: '',\n    status: 'created', \n    notes: '',\n    total_net: 0,\n    total_gross: 0,\n    items: []\n  });\n\n  const isEditMode = !!id;\n\n  // Accounts laden für die Auswahl\n  useEffect(() => {\n    const fetchAccounts = async () => {\n      try {\n        const response = await axios.get(`${API_URL}/accounts`);\n        if (response.data.success) {\n          setAccounts(response.data.data);\n        }\n      } catch (err) {\n        console.error('Fehler beim Abrufen der Accounts:', err);\n        setError('Fehler beim Laden der Accounts.');\n      }\n    };\n    fetchAccounts();\n  }, []);\n\n  // *** GEÄNDERT: Hausobjekte laden, wenn ein Account ausgewählt wird ***\n  useEffect(() => {\n    if (quote.account_id) {\n      const fetchProperties = async () => {\n        try {\n          const response = await axios.get(`${API_URL}/accounts/${quote.account_id}/properties`);\n          if (response.data.success) {\n            setProperties(response.data.data);\n            // Reset property_id if the current one is not in the new list\n            if (!response.data.data.some(p => p.property_id === quote.property_id)) {\n              setQuote(prev => ({ ...prev, property_id: '' }));\n            }\n          } else {\n            setProperties([]);\n            setQuote(prev => ({ ...prev, property_id: '' }));\n          }\n        } catch (err) {\n          console.error('Fehler beim Abrufen der Hausobjekte:', err);\n          setProperties([]);\n          setQuote(prev => ({ ...prev, property_id: '' }));\n          setError('Fehler beim Laden der Hausobjekte für diesen Account.');\n        }\n      };\n      fetchProperties();\n    } else {\n      setProperties([]); // Reset properties if no account is selected\n      setQuote(prev => ({ ...prev, property_id: '' }));\n    }\n  }, [quote.account_id]); // Abhängigkeit von account_id\n  // *** ENDE GEÄNDERT ***\n\n  // Produkte laden für die Auswahl (optional, da wir zu Freitext wechseln)\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        const response = await axios.get(`${API_URL}/products`);\n        if (response.data.success) {\n          setProducts(response.data.data);\n        }\n      } catch (err) {\n        console.error('Fehler beim Abrufen der Produkte:', err);\n        // setError('Fehler beim Laden der Produkte.'); // Optional\n      }\n    };\n    fetchProducts();\n  }, []);\n\n  // Angebots-Daten laden, wenn im Edit-Modus\n  useEffect(() => {\n    if (isEditMode) {\n      const fetchQuote = async () => {\n        try {\n          setLoading(true);\n          setError(null);\n          const response = await axios.get(`${API_URL}/quotes/${id}`);\n          if (response.data.success) {\n            const fetchedData = response.data.data;\n            // Stelle sicher, dass items ein Array ist\n            fetchedData.items = Array.isArray(fetchedData.items) ? fetchedData.items : [];\n            // Konvertiere Datumswerte für Input-Felder\n            fetchedData.quote_date = fetchedData.quote_date ? new Date(fetchedData.quote_date).toISOString().split('T')[0] : '';\n            fetchedData.valid_until = fetchedData.valid_until ? new Date(fetchedData.valid_until).toISOString().split('T')[0] : '';\n            // Entferne contact_id, falls es noch vom Backend kommt (sollte nicht, aber sicher ist sicher)\n            delete fetchedData.contact_id;\n            setQuote(fetchedData);\n          } else {\n            setError(response.data.message || 'Fehler beim Laden der Angebots-Daten');\n          }\n        } catch (err) {\n          console.error('Fehler beim Abrufen des Angebots:', err);\n          setError(err.response?.data?.message || 'Fehler beim Laden der Angebots-Daten');\n        } finally {\n          setLoading(false);\n        }\n      };\n      fetchQuote();\n    }\n  }, [id, isEditMode]);\n\n  // Formular-Eingaben aktualisieren\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setQuote(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  // Neues Item zum Angebot hinzufügen\n  const handleAddItem = () => {\n    setQuote(prev => ({\n      ...prev,\n      items: [\n        ...(Array.isArray(prev.items) ? prev.items : []), // Sicherstellen, dass items ein Array ist\n        {\n          // product_id: '', // Vorerst entfernt für Freitext\n          description: '',\n          quantity: 1,\n          unit: 'Stk', // Standardeinheit\n          unit_price: 0,\n          vat_rate: 19, // Standard MwSt.\n          total_net: 0,\n          total_gross: 0,\n          position: (Array.isArray(prev.items) ? prev.items.length : 0) + 1 // Position automatisch setzen\n        }\n      ]\n    }));\n  };\n\n  // Item aus dem Angebot entfernen\n  const handleRemoveItem = (index) => {\n    setQuote(prev => ({\n      ...prev,\n      items: (Array.isArray(prev.items) ? prev.items : []).filter((_, i) => i !== index)\n    }));\n  };\n\n  // Item-Eingaben aktualisieren und Summen neu berechnen\n  const handleItemChange = (index, field, value) => {\n    setQuote(prev => {\n      const updatedItems = [...(Array.isArray(prev.items) ? prev.items : [])];\n      if (!updatedItems[index]) return prev; // Sicherheitscheck\n\n      let numericValue = value;\n      if (['quantity', 'unit_price', 'vat_rate'].includes(field)) {\n        numericValue = parseFloat(value) || 0;\n      }\n\n      updatedItems[index] = {\n        ...updatedItems[index],\n        [field]: numericValue\n      };\n\n      // Neuberechnung der Zeilensummen\n      const item = updatedItems[index];\n      const quantity = Number(item.quantity) || 0;\n      const unitPrice = Number(item.unit_price) || 0;\n      const vatRate = Number(item.vat_rate) || 0;\n      \n      item.total_net = quantity * unitPrice;\n      item.total_gross = item.total_net * (1 + vatRate / 100);\n\n      return {\n        ...prev,\n        items: updatedItems\n      };\n    });\n  };\n\n  // Gesamtbeträge neu berechnen, wenn sich Items ändern\n  useEffect(() => {\n    const calculateTotals = () => {\n      const currentItems = Array.isArray(quote.items) ? quote.items : [];\n      const totalNet = currentItems.reduce((sum, item) => sum + (Number(item.total_net) || 0), 0);\n      const totalGross = currentItems.reduce((sum, item) => sum + (Number(item.total_gross) || 0), 0);\n      setQuote(prev => ({\n        ...prev,\n        total_net: totalNet,\n        total_gross: totalGross\n      }));\n    };\n    calculateTotals();\n  }, [quote.items]);\n\n  // Formular absenden\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setSaving(true);\n    setError(null);\n    setSuccess(false);\n\n    // Stelle sicher, dass items ein Array ist\n    const submissionData = {\n        ...quote,\n        items: Array.isArray(quote.items) ? quote.items : []\n    };\n\n    // Entferne contact_id explizit vor dem Senden\n    delete submissionData.contact_id;\n\n    try {\n      let response;\n      if (isEditMode) {\n        response = await axios.put(`${API_URL}/quotes/${id}`, submissionData);\n      } else {\n        response = await axios.post(`${API_URL}/quotes`, submissionData);\n      }\n\n      if (response.data.success) {\n        setSuccess(true);\n        setTimeout(() => {\n          navigate('/quotes');\n        }, 1500);\n      } else {\n        setError(response.data.message || 'Fehler beim Speichern des Angebots');\n      }\n    } catch (err) {\n      console.error('Fehler beim Speichern des Angebots:', err);\n      setError(err.response?.data?.message || 'Fehler beim Speichern des Angebots');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // Zurück zur Angebots-Liste\n  const handleBack = () => {\n    navigate('/quotes');\n  };\n\n  if (loading && isEditMode) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', p: 3 }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  return (\n    <Box>\n      <HeaderBox>\n        <Box sx={{ display: 'flex', alignItems: 'center' }}>\n          <Button \n            startIcon={<ArrowBackIcon />} \n            onClick={handleBack}\n            sx={{ mr: 2 }}\n          >\n            Zurück\n          </Button>\n          <Typography variant=\"h4\">\n            {isEditMode ? `Angebot #${quote.quote_number} bearbeiten` : 'Neues Angebot erstellen'}\n          </Typography>\n        </Box>\n        <Button \n          variant=\"contained\" \n          color=\"primary\" \n          startIcon={<SaveIcon />}\n          onClick={handleSubmit}\n          // *** GEÄNDERT: Speichern deaktivieren, wenn kein Account/Hausobjekt gewählt ***\n          disabled={saving || !quote.account_id || !quote.property_id} \n        >\n          {saving ? 'Wird gespeichert...' : 'Speichern'}\n        </Button>\n      </HeaderBox>\n\n      <Paper sx={{ p: 3 }}>\n        <form onSubmit={handleSubmit}>\n          <Grid container spacing={3}>\n            <Grid item xs={12}>\n              <FormCard>\n                <CardContent>\n                  <Typography variant=\"h6\" gutterBottom>\n                    Allgemeine Informationen\n                  </Typography>\n                  <Grid container spacing={2}>\n                    <Grid item xs={12} md={6}>\n                      <FormControl fullWidth margin=\"normal\" required>\n                        <InputLabel id=\"account-select-label\">Account *</InputLabel>\n                        <Select\n                          labelId=\"account-select-label\"\n                          id=\"account-select\"\n                          name=\"account_id\"\n                          value={quote.account_id || ''}\n                          onChange={handleChange}\n                          label=\"Account *\"\n                        >\n                          <MenuItem value=\"\">\n                            <em>Account auswählen</em>\n                          </MenuItem>\n                          {accounts.map((account) => (\n                            <MenuItem key={account.account_id} value={account.account_id}>\n                              {account.name}\n                            </MenuItem>\n                          ))}\n                        </Select>\n                      </FormControl>\n                    </Grid>\n                    {/* *** GEÄNDERT: Kontakt-Auswahl durch Hausobjekt-Auswahl ersetzt *** */}\n                    <Grid item xs={12} md={6}>\n                      <FormControl fullWidth margin=\"normal\" required disabled={!quote.account_id}> \n                        <InputLabel id=\"property-select-label\">Hausobjekt *</InputLabel>\n                        <Select\n                          labelId=\"property-select-label\"\n                          id=\"property-select\"\n                          name=\"property_id\"\n                          value={quote.property_id || ''}\n                          onChange={handleChange}\n                          label=\"Hausobjekt *\"\n                        >\n                          <MenuItem value=\"\">\n                            <em>Hausobjekt auswählen</em>\n                          </MenuItem>\n                          {properties.map((property) => (\n                            <MenuItem key={property.property_id} value={property.property_id}>\n                              {`${property.street} ${property.house_number}, ${property.zip_code} ${property.city}`}\n                            </MenuItem>\n                          ))}\n                        </Select>\n                      </FormControl>\n                    </Grid>\n                    {/* *** ENDE GEÄNDERT *** */}\n                    <Grid item xs={12} md={6}>\n                       <TextField\n                        fullWidth\n                        required\n                        label=\"Angebotsnummer *\"\n                        name=\"quote_number\" \n                        value={quote.quote_number || ''}\n                        onChange={handleChange}\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                      />\n                    </Grid>\n                     <Grid item xs={12} md={6}>\n                      <FormControl fullWidth margin=\"normal\">\n                        <InputLabel id=\"status-select-label\">Status</InputLabel>\n                        <Select\n                          labelId=\"status-select-label\"\n                          id=\"status-select\"\n                          name=\"status\"\n                          value={quote.status || 'created'}\n                          onChange={handleChange}\n                          label=\"Status\"\n                        >\n                          <MenuItem value=\"created\">Erstellt</MenuItem>\n                          <MenuItem value=\"sent\">Gesendet</MenuItem>\n                          <MenuItem value=\"accepted\">Akzeptiert</MenuItem>\n                          <MenuItem value=\"rejected\">Abgelehnt</MenuItem>\n                        </Select>\n                      </FormControl>\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                      <TextField\n                        fullWidth\n                        required\n                        label=\"Angebotsdatum *\"\n                        name=\"quote_date\" \n                        type=\"date\"\n                        value={quote.quote_date || ''}\n                        onChange={handleChange}\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        InputLabelProps={{\n                          shrink: true,\n                        }}\n                      />\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                      <TextField\n                        fullWidth\n                        label=\"Gültig bis\"\n                        name=\"valid_until\"\n                        type=\"date\"\n                        value={quote.valid_until || ''}\n                        onChange={handleChange}\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        InputLabelProps={{\n                          shrink: true,\n                        }}\n                      />\n                    </Grid>\n                  </Grid>\n                </CardContent>\n              </FormCard>\n            </Grid>\n\n            <Grid item xs={12}>\n              <FormCard>\n                <CardContent>\n                  <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n                    <Typography variant=\"h6\">\n                      Positionen\n                    </Typography>\n                    <Button \n                      variant=\"outlined\" \n                      startIcon={<AddIcon />} \n                      onClick={handleAddItem}\n                    >\n                      Position hinzufügen\n                    </Button>\n                  </Box>\n                  \n                  <TableContainer>\n                    <Table size=\"small\">\n                      <TableHead>\n                        <TableRow>\n                          <TableCell sx={{ width: '5%' }}>Pos.</TableCell>\n                          <TableCell sx={{ width: '40%' }}>Beschreibung</TableCell>\n                          <TableCell sx={{ width: '10%' }} align=\"right\">Menge</TableCell>\n                          <TableCell sx={{ width: '10%' }}>Einheit</TableCell>\n                          <TableCell sx={{ width: '10%' }} align=\"right\">Einzelpreis</TableCell>\n                          <TableCell sx={{ width: '10%' }} align=\"right\">MwSt.(%)</TableCell>\n                          <TableCell sx={{ width: '10%' }} align=\"right\">Netto</TableCell>\n                          {/* <TableCell align=\"right\">Brutto</TableCell> */}\n                          <TableCell sx={{ width: '5%' }}></TableCell>\n                        </TableRow>\n                      </TableHead>\n                      <TableBody>\n                        {(Array.isArray(quote.items) ? quote.items : []).map((item, index) => (\n                          <TableRow key={index}>\n                            <TableCell>{item.position}</TableCell>\n                            <TableCell>\n                              <TextField\n                                fullWidth\n                                multiline // Für Freitext\n                                value={item.description || ''}\n                                onChange={(e) => handleItemChange(index, 'description', e.target.value)}\n                                variant=\"standard\"\n                              />\n                            </TableCell>\n                            <TableCell align=\"right\">\n                              <TextField\n                                type=\"number\"\n                                value={item.quantity || 1}\n                                onChange={(e) => handleItemChange(index, 'quantity', e.target.value)}\n                                variant=\"standard\"\n                                inputProps={{ min: 0, step: 0.1 }}\n                                sx={{ width: '70px' }}\n                              />\n                            </TableCell>\n                             <TableCell>\n                              <TextField\n                                value={item.unit || 'Stk'}\n                                onChange={(e) => handleItemChange(index, 'unit', e.target.value)}\n                                variant=\"standard\"\n                                sx={{ width: '60px' }}\n                              />\n                            </TableCell>\n                            <TableCell align=\"right\">\n                              <TextField\n                                type=\"number\"\n                                value={item.unit_price || 0}\n                                onChange={(e) => handleItemChange(index, 'unit_price', e.target.value)}\n                                variant=\"standard\"\n                                inputProps={{ min: 0, step: 0.01 }}\n                                sx={{ width: '80px' }}\n                              />\n                            </TableCell>\n                            <TableCell align=\"right\">\n                              <TextField\n                                type=\"number\"\n                                value={item.vat_rate || 19}\n                                onChange={(e) => handleItemChange(index, 'vat_rate', e.target.value)}\n                                variant=\"standard\"\n                                inputProps={{ min: 0, step: 1 }}\n                                sx={{ width: '60px' }}\n                              />\n                            </TableCell>\n                            <TableCell align=\"right\">{formatCurrency(item.total_net)}</TableCell>\n                            {/* <TableCell align=\"right\">{formatCurrency(item.total_gross)}</TableCell> */}\n                            <TableCell align=\"center\">\n                              <IconButton onClick={() => handleRemoveItem(index)} size=\"small\">\n                                <DeleteIcon fontSize=\"small\" />\n                              </IconButton>\n                            </TableCell>\n                          </TableRow>\n                        ))}\n                      </TableBody>\n                    </Table>\n                  </TableContainer>\n                </CardContent>\n              </FormCard>\n            </Grid>\n\n            <Grid item xs={12}>\n              <FormCard>\n                <CardContent>\n                  <Typography variant=\"h6\" gutterBottom>\n                    Zusammenfassung & Notizen\n                  </Typography>\n                  <Grid container spacing={2}>\n                    <Grid item xs={12} md={6}>\n                      <TextField\n                        fullWidth\n                        multiline\n                        rows={4}\n                        label=\"Notizen\"\n                        name=\"notes\"\n                        value={quote.notes || ''}\n                        onChange={handleChange}\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                      />\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                      <Box sx={{ textAlign: 'right', mt: 2 }}>\n                        <Typography variant=\"subtitle1\">Gesamt Netto: {formatCurrency(quote.total_net)}</Typography>\n                        <Typography variant=\"h6\">Gesamt Brutto: {formatCurrency(quote.total_gross)}</Typography>\n                      </Box>\n                    </Grid>\n                  </Grid>\n                </CardContent>\n              </FormCard>\n            </Grid>\n          </Grid>\n        </form>\n      </Paper>\n\n      {/* Snackbar für Erfolgs- und Fehlermeldungen */} \n      <Snackbar open={success} autoHideDuration={6000} onClose={() => setSuccess(false)} anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}>\n        <Alert onClose={() => setSuccess(false)} severity=\"success\" sx={{ width: '100%' }}>\n          Angebot erfolgreich gespeichert!\n        </Alert>\n      </Snackbar>\n      <Snackbar open={!!error} autoHideDuration={6000} onClose={() => setError(null)} anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}>\n        <Alert onClose={() => setError(null)} severity=\"error\" sx={{ width: '100%' }}>\n          {error}\n        </Alert>\n      </Snackbar>\n    </Box>\n  );\n};\n\nexport default QuoteForm;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}