{"ast":null,"code":"var _jsxFileName = \"/Users/svenwinkler/CRM-Argus/frontend/src/pages/quotes/QuoteList.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Box, Typography, Paper, Button, TextField, InputAdornment, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, TablePagination, IconButton, Tooltip, CircularProgress, Chip, Snackbar,\n// Added Snackbar\nAlert // Added Alert\n} from '@mui/material';\nimport { styled } from '@mui/material/styles';\nimport AddIcon from '@mui/icons-material/Add';\nimport SearchIcon from '@mui/icons-material/Search';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport VisibilityIcon from '@mui/icons-material/Visibility';\nimport DescriptionIcon from '@mui/icons-material/Description';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\n\n// API Service für Angebote\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:3000/api';\n\n// Styled-Komponente für den Header-Bereich\nconst HeaderBox = styled(Box)(({\n  theme\n}) => ({\n  display: 'flex',\n  justifyContent: 'space-between',\n  alignItems: 'center',\n  marginBottom: theme.spacing(3)\n}));\n\n// Styled-Komponente für die Suchleiste\n_c = HeaderBox;\nconst SearchBox = styled(Box)(({\n  theme\n}) => ({\n  display: 'flex',\n  alignItems: 'center',\n  marginBottom: theme.spacing(3)\n}));\n\n// Funktion zum Formatieren von Währungsbeträgen\n_c2 = SearchBox;\nconst formatCurrency = amount => {\n  const numericAmount = Number(amount);\n  if (isNaN(numericAmount)) {\n    return 'N/A';\n  }\n  return new Intl.NumberFormat('de-DE', {\n    style: 'currency',\n    currency: 'EUR'\n  }).format(numericAmount);\n};\n\n// Funktion zum Formatieren von Datumsangaben\nconst formatDate = dateString => {\n  if (!dateString) return 'N/A';\n  try {\n    return new Date(dateString).toLocaleDateString('de-DE');\n  } catch (e) {\n    console.error(\"Error formatting date:\", dateString, e);\n    return 'Ungültiges Datum';\n  }\n};\n\n// Status-Chip-Komponente\nconst StatusChip = ({\n  status\n}) => {\n  let color = 'default';\n  let label = status;\n  switch (status) {\n    case 'created':\n      color = 'info';\n      label = 'Erstellt';\n      break;\n    case 'sent':\n      color = 'primary';\n      label = 'Gesendet';\n      break;\n    case 'accepted':\n      color = 'success';\n      label = 'Angenommen';\n      break;\n    case 'rejected':\n      color = 'error';\n      label = 'Abgelehnt';\n      break;\n    default:\n      color = 'default';\n      label = status;\n  }\n  return /*#__PURE__*/_jsxDEV(Chip, {\n    label: label,\n    color: color,\n    size: \"small\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 10\n  }, this);\n};\n_c3 = StatusChip;\nconst QuoteList = () => {\n  _s();\n  const navigate = useNavigate();\n  const [quotes, setQuotes] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(10);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [deleteError, setDeleteError] = useState(null); // State for delete errors\n  const [deleteSuccess, setDeleteSuccess] = useState(false); // State for delete success\n\n  // *** NEU: Funktion zum Laden der Angebote von der API ***\n  const fetchQuotes = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const response = await axios.get(`${API_URL}/quotes`);\n      if (response.data.success) {\n        // Optional: Daten anreichern, falls Account-Name etc. nicht direkt mitkommt\n        // Hier gehen wir davon aus, dass die API alle nötigen Infos liefert oder wir sie später holen\n        setQuotes(response.data.data);\n      } else {\n        setError(response.data.message || 'Fehler beim Laden der Angebote');\n      }\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('Fehler beim Abrufen der Angebote:', err);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Fehler beim Laden der Angebote');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Angebote beim ersten Laden und nach Änderungen abrufen\n  useEffect(() => {\n    fetchQuotes();\n  }, []); // Lädt nur beim ersten Mal\n\n  // Seitenänderung\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  // Anzahl der Zeilen pro Seite ändern\n  const handleChangeRowsPerPage = event => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  // Zur Angebot-Detail-Seite navigieren\n  const handleViewQuote = id => {\n    navigate(`/quotes/${id}`);\n  };\n\n  // Zur Angebot-Bearbeiten-Seite navigieren\n  const handleEditQuote = id => {\n    navigate(`/quotes/edit/${id}`);\n  };\n\n  // Angebot löschen\n  const handleDeleteQuote = async id => {\n    if (window.confirm('Sind Sie sicher, dass Sie dieses Angebot löschen möchten?')) {\n      try {\n        setDeleteError(null);\n        setDeleteSuccess(false);\n        const response = await axios.delete(`${API_URL}/quotes/${id}`);\n        if (response.data.success) {\n          setDeleteSuccess(true);\n          // Liste neu laden, um das gelöschte Angebot zu entfernen\n          fetchQuotes();\n        } else {\n          setDeleteError(response.data.message || 'Fehler beim Löschen des Angebots');\n        }\n      } catch (err) {\n        var _err$response2, _err$response2$data;\n        console.error('Fehler beim Löschen des Angebots:', err);\n        setDeleteError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || 'Fehler beim Löschen des Angebots');\n      }\n    }\n  };\n\n  // Neues Angebot erstellen\n  const handleCreateQuote = () => {\n    navigate('/quotes/new');\n  };\n\n  // Suche\n  const handleSearch = event => {\n    setSearchTerm(event.target.value);\n    setPage(0);\n  };\n\n  // Zum Account navigieren (benötigt account_id im quote-Objekt)\n  const handleNavigateToAccount = accountId => {\n    if (accountId) {\n      navigate(`/accounts/${accountId}`);\n    } else {\n      console.warn(\"Account ID missing for navigation\");\n    }\n  };\n\n  // Angebote filtern\n  const filteredQuotes = quotes.filter(quote => {\n    var _quote$quote_number, _quote$account_name, _quote$notes;\n    const searchTermLower = searchTerm.toLowerCase();\n    // Prüfe, ob die Felder existieren, bevor toLowerCase aufgerufen wird\n    const quoteNumberMatch = (_quote$quote_number = quote.quote_number) === null || _quote$quote_number === void 0 ? void 0 : _quote$quote_number.toLowerCase().includes(searchTermLower);\n    const accountNameMatch = (_quote$account_name = quote.account_name) === null || _quote$account_name === void 0 ? void 0 : _quote$account_name.toLowerCase().includes(searchTermLower); // Benötigt account_name in API-Antwort\n    // const propertyNameMatch = quote.property_name?.toLowerCase().includes(searchTermLower); // Benötigt property_name\n    // const contactNameMatch = quote.contact_name?.toLowerCase().includes(searchTermLower); // Benötigt contact_name\n    const notesMatch = (_quote$notes = quote.notes) === null || _quote$notes === void 0 ? void 0 : _quote$notes.toLowerCase().includes(searchTermLower);\n\n    // Füge hier weitere Suchfelder hinzu, falls die API sie liefert\n    return quoteNumberMatch || accountNameMatch || notesMatch;\n  });\n\n  // Paginierte Angebote\n  const paginatedQuotes = filteredQuotes.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: [/*#__PURE__*/_jsxDEV(HeaderBox, {\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        children: \"Angebote\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        startIcon: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 22\n        }, this),\n        onClick: handleCreateQuote,\n        children: \"Neues Angebot\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SearchBox, {\n      children: /*#__PURE__*/_jsxDEV(TextField, {\n        fullWidth: true,\n        variant: \"outlined\",\n        placeholder: \"Suche nach Angebotsnummer, Account, Notizen...\",\n        value: searchTerm,\n        onChange: handleSearch,\n        InputProps: {\n          startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n            position: \"start\",\n            children: /*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 15\n          }, this)\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 2,\n      children: loading ? /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'center',\n          p: 3\n        },\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 11\n      }, this) : error ? /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          p: 3,\n          textAlign: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          color: \"error\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(TableContainer, {\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            children: [/*#__PURE__*/_jsxDEV(TableHead, {\n              children: /*#__PURE__*/_jsxDEV(TableRow, {\n                children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Angebotsnummer\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 268,\n                    columnNumber: 32\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 268,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Datum\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 269,\n                    columnNumber: 32\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Betrag (Brutto)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 271,\n                    columnNumber: 32\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Status\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 272,\n                    columnNumber: 32\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 272,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"right\",\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Aktionen\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 273,\n                    columnNumber: 46\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n              children: paginatedQuotes.length > 0 ? paginatedQuotes.map(quote => /*#__PURE__*/_jsxDEV(TableRow, {\n                children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                  children: /*#__PURE__*/_jsxDEV(Box, {\n                    sx: {\n                      display: 'flex',\n                      alignItems: 'center'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(DescriptionIcon, {\n                      sx: {\n                        mr: 1,\n                        color: 'text.secondary'\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 282,\n                      columnNumber: 29\n                    }, this), quote.quote_number]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 281,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 280,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: formatDate(quote.quote_date)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: formatCurrency(quote.total_gross)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 301,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: /*#__PURE__*/_jsxDEV(StatusChip, {\n                    status: quote.status\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 303,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"right\",\n                  children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n                    title: \"Details anzeigen\",\n                    children: /*#__PURE__*/_jsxDEV(IconButton, {\n                      color: \"primary\",\n                      onClick: () => handleViewQuote(quote.quote_id),\n                      children: /*#__PURE__*/_jsxDEV(VisibilityIcon, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 311,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 307,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 306,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                    title: \"Bearbeiten\",\n                    children: /*#__PURE__*/_jsxDEV(IconButton, {\n                      color: \"secondary\" // Geändert zu secondary für Unterscheidung\n                      ,\n                      onClick: () => handleEditQuote(quote.quote_id),\n                      children: /*#__PURE__*/_jsxDEV(EditIcon, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 319,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 315,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 314,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                    title: \"L\\xF6schen\",\n                    children: /*#__PURE__*/_jsxDEV(IconButton, {\n                      color: \"error\",\n                      onClick: () => handleDeleteQuote(quote.quote_id),\n                      children: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 327,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 323,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 322,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 305,\n                  columnNumber: 25\n                }, this)]\n              }, quote.quote_id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 23\n              }, this)) : /*#__PURE__*/_jsxDEV(TableRow, {\n                children: /*#__PURE__*/_jsxDEV(TableCell, {\n                  colSpan: 6,\n                  align: \"center\",\n                  children: [\"Keine Angebote gefunden\", searchTerm ? ' für Ihre Suche' : '', \".\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 335,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(TablePagination, {\n          rowsPerPageOptions: [5, 10, 25],\n          component: \"div\",\n          count: filteredQuotes.length,\n          rowsPerPage: rowsPerPage,\n          page: page,\n          onPageChange: handleChangePage,\n          onRowsPerPageChange: handleChangeRowsPerPage,\n          labelRowsPerPage: \"Zeilen pro Seite:\",\n          labelDisplayedRows: ({\n            from,\n            to,\n            count\n          }) => `${from}-${to} von ${count}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: deleteSuccess,\n      autoHideDuration: 3000,\n      onClose: () => setDeleteSuccess(false),\n      anchorOrigin: {\n        vertical: 'bottom',\n        horizontal: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"success\",\n        sx: {\n          width: '100%'\n        },\n        onClose: () => setDeleteSuccess(false),\n        children: \"Angebot erfolgreich gel\\xF6scht!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: !!deleteError,\n      autoHideDuration: 6000,\n      onClose: () => setDeleteError(null),\n      anchorOrigin: {\n        vertical: 'bottom',\n        horizontal: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        sx: {\n          width: '100%'\n        },\n        onClose: () => setDeleteError(null),\n        children: deleteError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 221,\n    columnNumber: 5\n  }, this);\n};\n_s(QuoteList, \"5qFxKoJHvNDOSxI7tEihnQOK5bQ=\", false, function () {\n  return [useNavigate];\n});\n_c4 = QuoteList;\nexport default QuoteList;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"HeaderBox\");\n$RefreshReg$(_c2, \"SearchBox\");\n$RefreshReg$(_c3, \"StatusChip\");\n$RefreshReg$(_c4, \"QuoteList\");","map":{"version":3,"names":["React","useState","useEffect","Box","Typography","Paper","Button","TextField","InputAdornment","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","TablePagination","IconButton","Tooltip","CircularProgress","Chip","Snackbar","Alert","styled","AddIcon","SearchIcon","EditIcon","DeleteIcon","VisibilityIcon","DescriptionIcon","useNavigate","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","API_URL","HeaderBox","theme","display","justifyContent","alignItems","marginBottom","spacing","_c","SearchBox","_c2","formatCurrency","amount","numericAmount","Number","isNaN","Intl","NumberFormat","style","currency","format","formatDate","dateString","Date","toLocaleDateString","e","console","error","StatusChip","status","color","label","size","fileName","_jsxFileName","lineNumber","columnNumber","_c3","QuoteList","_s","navigate","quotes","setQuotes","loading","setLoading","setError","page","setPage","rowsPerPage","setRowsPerPage","searchTerm","setSearchTerm","deleteError","setDeleteError","deleteSuccess","setDeleteSuccess","fetchQuotes","response","get","data","success","message","err","_err$response","_err$response$data","handleChangePage","event","newPage","handleChangeRowsPerPage","parseInt","target","value","handleViewQuote","id","handleEditQuote","handleDeleteQuote","window","confirm","delete","_err$response2","_err$response2$data","handleCreateQuote","handleSearch","handleNavigateToAccount","accountId","warn","filteredQuotes","filter","quote","_quote$quote_number","_quote$account_name","_quote$notes","searchTermLower","toLowerCase","quoteNumberMatch","quote_number","includes","accountNameMatch","account_name","notesMatch","notes","paginatedQuotes","slice","children","variant","startIcon","onClick","fullWidth","placeholder","onChange","InputProps","startAdornment","position","elevation","sx","p","textAlign","align","length","map","mr","quote_date","total_gross","title","quote_id","colSpan","rowsPerPageOptions","component","count","onPageChange","onRowsPerPageChange","labelRowsPerPage","labelDisplayedRows","from","to","open","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","severity","width","_c4","$RefreshReg$"],"sources":["/Users/svenwinkler/CRM-Argus/frontend/src/pages/quotes/QuoteList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  Box, \n  Typography, \n  Paper, \n  Button, \n  TextField, \n  InputAdornment,\n  Table, \n  TableBody, \n  TableCell, \n  TableContainer, \n  TableHead, \n  TableRow,\n  TablePagination,\n  IconButton,\n  Tooltip,\n  CircularProgress,\n  Chip,\n  Snackbar, // Added Snackbar\n  Alert // Added Alert\n} from '@mui/material';\nimport { styled } from '@mui/material/styles';\nimport AddIcon from '@mui/icons-material/Add';\nimport SearchIcon from '@mui/icons-material/Search';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport VisibilityIcon from '@mui/icons-material/Visibility';\nimport DescriptionIcon from '@mui/icons-material/Description';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\n\n// API Service für Angebote\nconst API_URL = 'http://localhost:3000/api';\n\n// Styled-Komponente für den Header-Bereich\nconst HeaderBox = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  justifyContent: 'space-between',\n  alignItems: 'center',\n  marginBottom: theme.spacing(3),\n}));\n\n// Styled-Komponente für die Suchleiste\nconst SearchBox = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  marginBottom: theme.spacing(3),\n}));\n\n// Funktion zum Formatieren von Währungsbeträgen\nconst formatCurrency = (amount) => {\n  const numericAmount = Number(amount);\n  if (isNaN(numericAmount)) {\n    return 'N/A';\n  }\n  return new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'EUR' }).format(numericAmount);\n};\n\n// Funktion zum Formatieren von Datumsangaben\nconst formatDate = (dateString) => {\n  if (!dateString) return 'N/A';\n  try {\n    return new Date(dateString).toLocaleDateString('de-DE');\n  } catch (e) {\n    console.error(\"Error formatting date:\", dateString, e);\n    return 'Ungültiges Datum';\n  }\n};\n\n// Status-Chip-Komponente\nconst StatusChip = ({ status }) => {\n  let color = 'default';\n  let label = status;\n  \n  switch (status) {\n    case 'created':\n      color = 'info';\n      label = 'Erstellt';\n      break;\n    case 'sent':\n      color = 'primary';\n      label = 'Gesendet';\n      break;\n    case 'accepted':\n      color = 'success';\n      label = 'Angenommen';\n      break;\n    case 'rejected':\n      color = 'error';\n      label = 'Abgelehnt';\n      break;\n    default:\n      color = 'default';\n      label = status;\n  }\n  \n  return <Chip label={label} color={color} size=\"small\" />;\n};\n\nconst QuoteList = () => {\n  const navigate = useNavigate();\n  const [quotes, setQuotes] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(10);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [deleteError, setDeleteError] = useState(null); // State for delete errors\n  const [deleteSuccess, setDeleteSuccess] = useState(false); // State for delete success\n\n  // *** NEU: Funktion zum Laden der Angebote von der API ***\n  const fetchQuotes = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const response = await axios.get(`${API_URL}/quotes`);\n      if (response.data.success) {\n        // Optional: Daten anreichern, falls Account-Name etc. nicht direkt mitkommt\n        // Hier gehen wir davon aus, dass die API alle nötigen Infos liefert oder wir sie später holen\n        setQuotes(response.data.data);\n      } else {\n        setError(response.data.message || 'Fehler beim Laden der Angebote');\n      }\n    } catch (err) {\n      console.error('Fehler beim Abrufen der Angebote:', err);\n      setError(err.response?.data?.message || 'Fehler beim Laden der Angebote');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Angebote beim ersten Laden und nach Änderungen abrufen\n  useEffect(() => {\n    fetchQuotes();\n  }, []); // Lädt nur beim ersten Mal\n\n  // Seitenänderung\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  // Anzahl der Zeilen pro Seite ändern\n  const handleChangeRowsPerPage = (event) => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  // Zur Angebot-Detail-Seite navigieren\n  const handleViewQuote = (id) => {\n    navigate(`/quotes/${id}`);\n  };\n\n  // Zur Angebot-Bearbeiten-Seite navigieren\n  const handleEditQuote = (id) => {\n    navigate(`/quotes/edit/${id}`);\n  };\n\n  // Angebot löschen\n  const handleDeleteQuote = async (id) => {\n    if (window.confirm('Sind Sie sicher, dass Sie dieses Angebot löschen möchten?')) {\n      try {\n        setDeleteError(null);\n        setDeleteSuccess(false);\n        const response = await axios.delete(`${API_URL}/quotes/${id}`);\n        if (response.data.success) {\n          setDeleteSuccess(true);\n          // Liste neu laden, um das gelöschte Angebot zu entfernen\n          fetchQuotes(); \n        } else {\n          setDeleteError(response.data.message || 'Fehler beim Löschen des Angebots');\n        }\n      } catch (err) {\n        console.error('Fehler beim Löschen des Angebots:', err);\n        setDeleteError(err.response?.data?.message || 'Fehler beim Löschen des Angebots');\n      }\n    }\n  };\n\n  // Neues Angebot erstellen\n  const handleCreateQuote = () => {\n    navigate('/quotes/new');\n  };\n\n  // Suche\n  const handleSearch = (event) => {\n    setSearchTerm(event.target.value);\n    setPage(0);\n  };\n\n  // Zum Account navigieren (benötigt account_id im quote-Objekt)\n  const handleNavigateToAccount = (accountId) => {\n    if (accountId) {\n        navigate(`/accounts/${accountId}`);\n    } else {\n        console.warn(\"Account ID missing for navigation\");\n    }\n  };\n\n  // Angebote filtern\n  const filteredQuotes = quotes.filter(quote => {\n    const searchTermLower = searchTerm.toLowerCase();\n    // Prüfe, ob die Felder existieren, bevor toLowerCase aufgerufen wird\n    const quoteNumberMatch = quote.quote_number?.toLowerCase().includes(searchTermLower);\n    const accountNameMatch = quote.account_name?.toLowerCase().includes(searchTermLower); // Benötigt account_name in API-Antwort\n    // const propertyNameMatch = quote.property_name?.toLowerCase().includes(searchTermLower); // Benötigt property_name\n    // const contactNameMatch = quote.contact_name?.toLowerCase().includes(searchTermLower); // Benötigt contact_name\n    const notesMatch = quote.notes?.toLowerCase().includes(searchTermLower);\n    \n    // Füge hier weitere Suchfelder hinzu, falls die API sie liefert\n    return quoteNumberMatch || accountNameMatch || notesMatch; \n  });\n\n  // Paginierte Angebote\n  const paginatedQuotes = filteredQuotes.slice(\n    page * rowsPerPage,\n    page * rowsPerPage + rowsPerPage\n  );\n\n  return (\n    <Box>\n      <HeaderBox>\n        <Typography variant=\"h4\">\n          Angebote\n        </Typography>\n        <Button \n          variant=\"contained\" \n          color=\"primary\" \n          startIcon={<AddIcon />}\n          onClick={handleCreateQuote}\n        >\n          Neues Angebot\n        </Button>\n      </HeaderBox>\n\n      <SearchBox>\n        <TextField\n          fullWidth\n          variant=\"outlined\"\n          placeholder=\"Suche nach Angebotsnummer, Account, Notizen...\"\n          value={searchTerm}\n          onChange={handleSearch}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <SearchIcon />\n              </InputAdornment>\n            ),\n          }}\n        />\n      </SearchBox>\n\n      <Paper elevation={2}>\n        {loading ? (\n          <Box sx={{ display: 'flex', justifyContent: 'center', p: 3 }}>\n            <CircularProgress />\n          </Box>\n        ) : error ? (\n          <Box sx={{ p: 3, textAlign: 'center' }}>\n            <Typography color=\"error\">{error}</Typography>\n          </Box>\n        ) : (\n          <>\n            <TableContainer>\n              <Table>\n                <TableHead>\n                  <TableRow>\n                    <TableCell><strong>Angebotsnummer</strong></TableCell>\n                    <TableCell><strong>Datum</strong></TableCell>\n                    {/* <TableCell><strong>Account</strong></TableCell> // Auskommentiert, falls account_name nicht verfügbar */} \n                    <TableCell><strong>Betrag (Brutto)</strong></TableCell>\n                    <TableCell><strong>Status</strong></TableCell>\n                    <TableCell align=\"right\"><strong>Aktionen</strong></TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {paginatedQuotes.length > 0 ? (\n                    paginatedQuotes.map((quote) => (\n                      <TableRow key={quote.quote_id}>\n                        <TableCell>\n                          <Box sx={{ display: 'flex', alignItems: 'center' }}>\n                            <DescriptionIcon sx={{ mr: 1, color: 'text.secondary' }} />\n                            {quote.quote_number}\n                          </Box>\n                        </TableCell>\n                        <TableCell>{formatDate(quote.quote_date)}</TableCell>\n                        {/* <TableCell>\n                          {quote.account_id ? (\n                            <Chip \n                              label={quote.account_name || `Account ${quote.account_id}`} // Fallback, falls Name fehlt\n                              color=\"primary\" \n                              variant=\"outlined\" \n                              clickable\n                              onClick={() => handleNavigateToAccount(quote.account_id)}\n                              size=\"small\"\n                            />\n                          ) : (\n                            'N/A'\n                          )}\n                        </TableCell> */}\n                        <TableCell>{formatCurrency(quote.total_gross)}</TableCell>\n                        <TableCell>\n                          <StatusChip status={quote.status} />\n                        </TableCell>\n                        <TableCell align=\"right\">\n                          <Tooltip title=\"Details anzeigen\">\n                            <IconButton \n                              color=\"primary\"\n                              onClick={() => handleViewQuote(quote.quote_id)}\n                            >\n                              <VisibilityIcon />\n                            </IconButton>\n                          </Tooltip>\n                          <Tooltip title=\"Bearbeiten\">\n                            <IconButton \n                              color=\"secondary\" // Geändert zu secondary für Unterscheidung\n                              onClick={() => handleEditQuote(quote.quote_id)}\n                            >\n                              <EditIcon />\n                            </IconButton>\n                          </Tooltip>\n                          <Tooltip title=\"Löschen\">\n                            <IconButton \n                              color=\"error\"\n                              onClick={() => handleDeleteQuote(quote.quote_id)}\n                            >\n                              <DeleteIcon />\n                            </IconButton>\n                          </Tooltip>\n                        </TableCell>\n                      </TableRow>\n                    ))\n                  ) : (\n                    <TableRow>\n                      <TableCell colSpan={6} align=\"center\">\n                        Keine Angebote gefunden{searchTerm ? ' für Ihre Suche' : ''}.\n                      </TableCell>\n                    </TableRow>\n                  )}\n                </TableBody>\n              </Table>\n            </TableContainer>\n            <TablePagination\n              rowsPerPageOptions={[5, 10, 25]}\n              component=\"div\"\n              count={filteredQuotes.length}\n              rowsPerPage={rowsPerPage}\n              page={page}\n              onPageChange={handleChangePage}\n              onRowsPerPageChange={handleChangeRowsPerPage}\n              labelRowsPerPage=\"Zeilen pro Seite:\"\n              labelDisplayedRows={({ from, to, count }) => `${from}-${to} von ${count}`}\n            />\n          </>\n        )}\n      </Paper>\n      \n      {/* Snackbar für Erfolgs-/Fehlermeldungen beim Löschen */}\n      <Snackbar \n        open={deleteSuccess} \n        autoHideDuration={3000} \n        onClose={() => setDeleteSuccess(false)}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n      >\n        <Alert severity=\"success\" sx={{ width: '100%' }} onClose={() => setDeleteSuccess(false)}>\n          Angebot erfolgreich gelöscht!\n        </Alert>\n      </Snackbar>\n      <Snackbar \n        open={!!deleteError} \n        autoHideDuration={6000} \n        onClose={() => setDeleteError(null)}\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n      >\n        <Alert severity=\"error\" sx={{ width: '100%' }} onClose={() => setDeleteError(null)}>\n          {deleteError}\n        </Alert>\n      </Snackbar>\n\n    </Box>\n  );\n};\n\nexport default QuoteList;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}